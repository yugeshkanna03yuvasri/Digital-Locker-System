{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://localhost:8081/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('accessToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(response => response, async error => {\n  var _error$response;\n  const originalRequest = error.config;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    const refreshToken = localStorage.getItem('refreshToken');\n    if (refreshToken) {\n      try {\n        const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n          refreshToken: refreshToken\n        });\n        const {\n          accessToken,\n          refreshToken: newRefreshToken\n        } = response.data;\n        localStorage.setItem('accessToken', accessToken);\n        localStorage.setItem('refreshToken', newRefreshToken);\n        originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n        return api(originalRequest);\n      } catch (refreshError) {\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        window.location.href = '/login';\n      }\n    }\n  }\n  return Promise.reject(error);\n});\n\n// Auth API\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', {\n    email,\n    password\n  }),\n  logout: (refreshToken, revokeAll = false) => api.post('/auth/logout', {\n    refreshToken,\n    revokeAll\n  }),\n  getMe: () => api.get('/auth/me'),\n  signup: (name, email, password, role = 'USER', additionalData = {}) => api.post('/users/signup', {\n    name,\n    email,\n    password,\n    role,\n    phone: additionalData.phone,\n    company: additionalData.company,\n    jobTitle: additionalData.jobTitle,\n    adminCode: additionalData.adminCode\n  })\n};\n\n// User API\nexport const userAPI = {\n  getAllUsers: () => api.get('/users'),\n  getUserById: id => api.get(`/users/${id}`),\n  updateUser: (id, userData) => api.put(`/users/${id}`, userData),\n  deleteUser: id => api.delete(`/users/${id}`)\n};\n\n// Document API\nexport const documentAPI = {\n  getAllDocuments: () => api.get('/documents'),\n  getDocumentById: id => api.get(`/documents/${id}`),\n  uploadDocument: formData => api.post('/documents/upload', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  }),\n  downloadDocument: id => api.get(`/documents/${id}/download`, {\n    responseType: 'blob'\n  }),\n  deleteDocument: id => api.delete(`/documents/${id}`),\n  updateDocument: (id, documentData) => api.put(`/documents/${id}`, documentData),\n  renameDocument: (id, newName) => api.put(`/documents/${id}/rename`, {\n    name: newName\n  }),\n  setPassword: (id, password) => api.put(`/documents/${id}/password`, {\n    password\n  }),\n  removePassword: id => api.delete(`/documents/${id}/password`),\n  verifyPassword: (id, password) => api.post(`/documents/${id}/verify-password`, {\n    password\n  })\n};\n\n// Folder API\nexport const folderAPI = {\n  getAllFolders: () => api.get('/folders'),\n  getFolderById: id => api.get(`/folders/${id}`),\n  createFolder: folderData => api.post('/folders', folderData),\n  updateFolder: (id, folderData) => api.put(`/folders/${id}`, folderData),\n  deleteFolder: id => api.delete(`/folders/${id}`),\n  setPassword: (id, password) => api.put(`/folders/${id}/password`, {\n    password\n  }),\n  removePassword: id => api.delete(`/folders/${id}/password`),\n  verifyPassword: (id, password) => api.post(`/folders/${id}/verify-password`, {\n    password\n  })\n};\n\n// Activity Log API\nexport const activityAPI = {\n  getAllLogs: () => api.get('/activity'),\n  getUserLogs: () => api.get('/activity/user'),\n  recordActivity: (action, details) => api.post('/activity/record', {\n    action,\n    details\n  }),\n  getLogsByFile: fileId => api.get(`/activity/file/${fileId}`)\n};\n\n// OTP API\nexport const otpAPI = {\n  sendOTP: () => api.post('/otp/send'),\n  verifyOTP: otp => api.post('/otp/verify', {\n    otp\n  })\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","accessToken","newRefreshToken","data","setItem","refreshError","removeItem","window","location","href","authAPI","login","email","password","logout","revokeAll","getMe","get","signup","name","role","additionalData","phone","company","jobTitle","adminCode","userAPI","getAllUsers","getUserById","id","updateUser","userData","put","deleteUser","delete","documentAPI","getAllDocuments","getDocumentById","uploadDocument","formData","downloadDocument","responseType","deleteDocument","updateDocument","documentData","renameDocument","newName","setPassword","removePassword","verifyPassword","folderAPI","getAllFolders","getFolderById","createFolder","folderData","updateFolder","deleteFolder","activityAPI","getAllLogs","getUserLogs","recordActivity","action","details","getLogsByFile","fileId","otpAPI","sendOTP","verifyOTP","otp"],"sources":["C:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8081/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n    \n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      \n      const refreshToken = localStorage.getItem('refreshToken');\n      if (refreshToken) {\n        try {\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n            refreshToken: refreshToken\n          });\n          \n          const { accessToken, refreshToken: newRefreshToken } = response.data;\n          localStorage.setItem('accessToken', accessToken);\n          localStorage.setItem('refreshToken', newRefreshToken);\n          \n          originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n          return api(originalRequest);\n        } catch (refreshError) {\n          localStorage.removeItem('accessToken');\n          localStorage.removeItem('refreshToken');\n          window.location.href = '/login';\n        }\n      }\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authAPI = {\n  login: (email, password) => \n    api.post('/auth/login', { email, password }),\n  \n  logout: (refreshToken, revokeAll = false) => \n    api.post('/auth/logout', { refreshToken, revokeAll }),\n  \n  getMe: () => \n    api.get('/auth/me'),\n  \n  signup: (name, email, password, role = 'USER', additionalData = {}) => \n    api.post('/users/signup', { \n      name, \n      email, \n      password, \n      role,\n      phone: additionalData.phone,\n      company: additionalData.company,\n      jobTitle: additionalData.jobTitle,\n      adminCode: additionalData.adminCode\n    })\n};\n\n// User API\nexport const userAPI = {\n  getAllUsers: () => api.get('/users'),\n  getUserById: (id) => api.get(`/users/${id}`),\n  updateUser: (id, userData) => api.put(`/users/${id}`, userData),\n  deleteUser: (id) => api.delete(`/users/${id}`)\n};\n\n// Document API\nexport const documentAPI = {\n  getAllDocuments: () => api.get('/documents'),\n  getDocumentById: (id) => api.get(`/documents/${id}`),\n  uploadDocument: (formData) => api.post('/documents/upload', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' }\n  }),\n  downloadDocument: (id) => api.get(`/documents/${id}/download`, {\n    responseType: 'blob'\n  }),\n  deleteDocument: (id) => api.delete(`/documents/${id}`),\n  updateDocument: (id, documentData) => api.put(`/documents/${id}`, documentData),\n  renameDocument: (id, newName) => api.put(`/documents/${id}/rename`, { name: newName }),\n  setPassword: (id, password) => api.put(`/documents/${id}/password`, { password }),\n  removePassword: (id) => api.delete(`/documents/${id}/password`),\n  verifyPassword: (id, password) => api.post(`/documents/${id}/verify-password`, { password })\n};\n\n// Folder API\nexport const folderAPI = {\n  getAllFolders: () => api.get('/folders'),\n  getFolderById: (id) => api.get(`/folders/${id}`),\n  createFolder: (folderData) => api.post('/folders', folderData),\n  updateFolder: (id, folderData) => api.put(`/folders/${id}`, folderData),\n  deleteFolder: (id) => api.delete(`/folders/${id}`),\n  setPassword: (id, password) => api.put(`/folders/${id}/password`, { password }),\n  removePassword: (id) => api.delete(`/folders/${id}/password`),\n  verifyPassword: (id, password) => api.post(`/folders/${id}/verify-password`, { password })\n};\n\n// Activity Log API\nexport const activityAPI = {\n  getAllLogs: () => api.get('/activity'),\n  getUserLogs: () => api.get('/activity/user'),\n  recordActivity: (action, details) => api.post('/activity/record', { action, details }),\n  getLogsByFile: (fileId) => api.get(`/activity/file/${fileId}`)\n};\n\n// OTP API\nexport const otpAPI = {\n  sendOTP: () => api.post('/otp/send'),\n  verifyOTP: (otp) => api.post('/otp/verify', { otp })\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}