{"ast":null,"code":"import _objectSpread from\"c:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import Sidebar from\"../components/Sidebar\";import NewFolderModal from\"../components/NewFolderModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserDashboard(){const[folders,setFolders]=useState(()=>{const saved=localStorage.getItem(\"folders\");return saved?JSON.parse(saved):[];});const[currentFolder,setCurrentFolder]=useState(null);const[showUpload,setShowUpload]=useState(false);const[showNewFolder,setShowNewFolder]=useState(false);const[search,setSearch]=useState(\"\");useEffect(()=>{localStorage.setItem(\"folders\",JSON.stringify(folders));},[folders]);const handleCreateFolder=name=>{if(!name.trim())return alert(\"Folder name required!\");const newFolder={id:Date.now(),name,files:[]};setFolders(prev=>[...prev,newFolder]);};const handleUpload=fileData=>{const newFile={id:Date.now(),name:fileData.name,size:\"\".concat((fileData.size/1024).toFixed(1),\" KB\"),date:new Date().toISOString().split(\"T\")[0],url:fileData.Url};if(currentFolder){setFolders(prev=>prev.map(f=>f.id===currentFolder.id?_objectSpread(_objectSpread({},f),{},{files:[...f.files,newFile]}):f));}else{setFolders(prev=>{const root=prev.find(f=>f.name===\"__ROOT__\");if(root){root.files.push(newFile);return[...prev];}return[...prev,{id:\"root\",name:\"__ROOT__\",files:[newFile]}];});}const history=JSON.parse(localStorage.getItem(\"history\")||\"[]\");history.push({id:Date.now(),fileName:newFile.name,folder:currentFolder?currentFolder.name:\"Root\",date:newFile.date});localStorage.setItem(\"history\",JSON.stringify(history));};const handleOpenFolder=folder=>setCurrentFolder(folder);const handleGoBack=()=>setCurrentFolder(null);const filteredFolders=currentFolder?currentFolder.files.filter(file=>file.name.toLowerCase().includes(search.toLowerCase())):folders.filter(f=>f.name.toLowerCase().includes(search.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-screen bg-[#F0F0F0]\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#2F3E27]\",children:currentFolder?currentFolder.name:\"My Documents\"}),currentFolder&&/*#__PURE__*/_jsx(\"button\",{onClick:handleGoBack,className:\"text-[#96A78D] text-sm hover:underline mt-1\",children:\"\\u2190 Back to My Documents\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",value:search,onChange:e=>setSearch(e.target.value),className:\"border border-[#B6CEB4] rounded-lg px-3 py-2 w-48 bg-white text-gray-700 focus:ring-2 focus:ring-[#96A78D] outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewFolder(true),className:\"bg-[#96A78D] text-white px-4 py-2 rounded-lg hover:bg-[#5B7C56] transition\",children:\"New Folder\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUpload(true),className:\"bg-[#B6CEB4] text-gray-900 px-4 py-2 rounded-lg hover:bg-[#96A78D] transition\",children:\"Upload\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-center py-8\",children:[\"This dashboard has been replaced by the enhanced File Dashboard.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/file-dashboard\",className:\"text-blue-600 hover:underline\",children:\"Go to File Dashboard\"})]})}),showNewFolder&&/*#__PURE__*/_jsx(NewFolderModal,{onClose:()=>setShowNewFolder(false),onCreate:handleCreateFolder})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Sidebar","NewFolderModal","jsx","_jsx","jsxs","_jsxs","UserDashboard","folders","setFolders","saved","localStorage","getItem","JSON","parse","currentFolder","setCurrentFolder","showUpload","setShowUpload","showNewFolder","setShowNewFolder","search","setSearch","setItem","stringify","handleCreateFolder","name","trim","alert","newFolder","id","Date","now","files","prev","handleUpload","fileData","newFile","size","concat","toFixed","date","toISOString","split","url","Url","map","f","_objectSpread","root","find","push","history","fileName","folder","handleOpenFolder","handleGoBack","filteredFolders","filter","file","toLowerCase","includes","className","children","onClick","type","placeholder","value","onChange","e","target","href","onClose","onCreate"],"sources":["c:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/src/components/UserDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport NewFolderModal from \"../components/NewFolderModal\";\r\n\r\nexport default function UserDashboard() {\r\n  const [folders, setFolders] = useState(() => {\r\n    const saved = localStorage.getItem(\"folders\");\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  const [currentFolder, setCurrentFolder] = useState(null);\r\n  const [showUpload, setShowUpload] = useState(false);\r\n  const [showNewFolder, setShowNewFolder] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"folders\", JSON.stringify(folders));\r\n  }, [folders]);\r\n\r\n  const handleCreateFolder = (name) => {\r\n    if (!name.trim()) return alert(\"Folder name required!\");\r\n    const newFolder = { id: Date.now(), name, files: [] };\r\n    setFolders((prev) => [...prev, newFolder]);\r\n  };\r\n\r\n  const handleUpload = (fileData) => {\r\n    const newFile = {\r\n      id: Date.now(),\r\n      name: fileData.name,\r\n      size: `${(fileData.size / 1024).toFixed(1)} KB`,\r\n      date: new Date().toISOString().split(\"T\")[0],\r\n      url: fileData.Url,\r\n    };\r\n\r\n    if (currentFolder) {\r\n      setFolders((prev) =>\r\n        prev.map((f) =>\r\n          f.id === currentFolder.id\r\n            ? { ...f, files: [...f.files, newFile] }\r\n            : f\r\n        )\r\n      );\r\n    } else {\r\n      setFolders((prev) => {\r\n        const root = prev.find((f) => f.name === \"__ROOT__\");\r\n        if (root) {\r\n          root.files.push(newFile);\r\n          return [...prev];\r\n        }\r\n        return [...prev, { id: \"root\", name: \"__ROOT__\", files: [newFile] }];\r\n      });\r\n    }\r\n\r\n    const history = JSON.parse(localStorage.getItem(\"history\") || \"[]\");\r\n    history.push({\r\n      id: Date.now(),\r\n      fileName: newFile.name,\r\n      folder: currentFolder ? currentFolder.name : \"Root\",\r\n      date: newFile.date,\r\n    });\r\n    localStorage.setItem(\"history\", JSON.stringify(history));\r\n  };\r\n\r\n  const handleOpenFolder = (folder) => setCurrentFolder(folder);\r\n  const handleGoBack = () => setCurrentFolder(null);\r\n\r\n  const filteredFolders = currentFolder\r\n    ? currentFolder.files.filter((file) =>\r\n        file.name.toLowerCase().includes(search.toLowerCase())\r\n      )\r\n    : folders.filter((f) =>\r\n        f.name.toLowerCase().includes(search.toLowerCase())\r\n      );\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-[#F0F0F0]\">\r\n      <Sidebar />\r\n\r\n      <div className=\"flex-1 p-6\">\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-[#2F3E27]\">\r\n              {currentFolder ? currentFolder.name : \"My Documents\"}\r\n            </h1>\r\n            {currentFolder && (\r\n              <button\r\n                onClick={handleGoBack}\r\n                className=\"text-[#96A78D] text-sm hover:underline mt-1\"\r\n              >\r\n                ‚Üê Back to My Documents\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex items-center gap-3\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              className=\"border border-[#B6CEB4] rounded-lg px-3 py-2 w-48 bg-white text-gray-700 focus:ring-2 focus:ring-[#96A78D] outline-none\"\r\n            />\r\n            <button\r\n              onClick={() => setShowNewFolder(true)}\r\n              className=\"bg-[#96A78D] text-white px-4 py-2 rounded-lg hover:bg-[#5B7C56] transition\"\r\n            >\r\n              New Folder\r\n            </button>\r\n            <button\r\n              onClick={() => setShowUpload(true)}\r\n              className=\"bg-[#B6CEB4] text-gray-900 px-4 py-2 rounded-lg hover:bg-[#96A78D] transition\"\r\n            >\r\n              Upload\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* File Browser */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n          <p className=\"text-gray-500 text-center py-8\">\r\n            This dashboard has been replaced by the enhanced File Dashboard.\r\n            <br />\r\n            <a href=\"/file-dashboard\" className=\"text-blue-600 hover:underline\">\r\n              Go to File Dashboard\r\n            </a>\r\n          </p>\r\n        </div>\r\n\r\n        {/* Modals */}\r\n\r\n        {showNewFolder && (\r\n          <NewFolderModal\r\n            onClose={() => setShowNewFolder(false)}\r\n            onCreate={handleCreateFolder}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}