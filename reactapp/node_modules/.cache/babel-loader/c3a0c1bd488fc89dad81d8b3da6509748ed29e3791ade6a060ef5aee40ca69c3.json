{"ast":null,"code":"import _objectSpread from\"c:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useAuth}from'../../contexts/AuthContext';import{documentAPI,folderAPI,activityAPI,otpAPI}from'../../services/api';import{COLORS,formatFileSize,getFileType}from'./DashboardUtils';import{Sidebar,Header,FileDetailModal,NewFolderModal}from'./DashboardComponents';import{MyFilesView,HistoryView,ActivityLogView}from'./FileViews';import{DropboxMyFilesView,DropboxHistoryView,DropboxActivityLogView}from'./DropboxStyleFileViews';import{PasswordProtectionModal,PasswordVerificationModal,SharePermissionsModal,FolderPasswordProtectionModal,FolderPasswordVerificationModal}from'../modals/SecurityModals';import{OTPVerificationModal,EnhancedPasswordProtectionModal}from'../modals/EnhancedSecurityModals';import FileViewer from'../viewers/FileViewer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserFileDashboard(){const{user}=useAuth();const[activeView,setActiveView]=useState('My Files');const[files,setFiles]=useState([]);const[folders,setFolders]=useState([]);const[activityLogs,setActivityLogs]=useState([]);const[isModalOpen,setIsModalOpen]=useState(false);const[modalFile,setModalFile]=useState(null);const[isNewFolderModalOpen,setIsNewFolderModalOpen]=useState(false);const[isUploading,setIsUploading]=useState(false);const[currentFolder,setCurrentFolder]=useState(null);const[breadcrumb,setBreadcrumb]=useState([]);const[backendConnected,setBackendConnected]=useState(true);const[isFileViewerOpen,setIsFileViewerOpen]=useState(false);const[viewerFile,setViewerFile]=useState(null);// Professional features state\nconst[searchTerm,setSearchTerm]=useState('');const[sortBy,setSortBy]=useState('uploadDate');const[sortOrder,setSortOrder]=useState('desc');const[filterType,setFilterType]=useState('all');const[selectedFiles,setSelectedFiles]=useState([]);const[dragActive,setDragActive]=useState(false);const[fileFilter,setFileFilter]=useState('all');const[selectedFolders,setSelectedFolders]=useState([]);const[showPasswordModal,setShowPasswordModal]=useState(false);const[showPasswordVerifyModal,setShowPasswordVerifyModal]=useState(false);const[showShareModal,setShowShareModal]=useState(false);const[pendingFile,setPendingFile]=useState(null);const[showFolderPasswordModal,setShowFolderPasswordModal]=useState(false);const[showFolderPasswordVerifyModal,setShowFolderPasswordVerifyModal]=useState(false);const[pendingFolder,setPendingFolder]=useState(null);const[modalFolder,setModalFolder]=useState(null);const[showOTPModal,setShowOTPModal]=useState(false);const[pendingOTPFile,setPendingOTPFile]=useState(null);const[showEnhancedPasswordModal,setShowEnhancedPasswordModal]=useState(false);const fileInputRef=useRef(null);// Load data from backend\nuseEffect(()=>{if(user){console.log('Loading data for user:',user);// Test backend connectivity first\ntestBackendConnection();loadFolders();loadFiles();loadActivityLogs();// Set up global handlers for password modals\nwindow.onShowFolderPasswordModal=folder=>{setModalFolder(folder);setShowFolderPasswordModal(true);};window.onShowPasswordVerificationModal=file=>{setPendingFile(file);setShowPasswordVerifyModal(true);};}},[user]);const testBackendConnection=async()=>{try{console.log('Testing backend connection...');const token=localStorage.getItem('accessToken');if(!token){console.log('No access token found');setBackendConnected(false);return;}const response=await fetch('http://localhost:8080/api/auth/me',{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});console.log('Backend connection test:',response.status,response.statusText);if(response.ok){const data=await response.json();console.log('Backend user data:',data);setBackendConnected(true);}else if(response.status===401){console.log('Token expired or invalid');setBackendConnected(false);}else{console.log('Backend connection failed with status:',response.status);setBackendConnected(false);}}catch(error){console.error('Backend connection failed:',error);setBackendConnected(false);console.warn('Running in offline mode with sample data');}};const loadFolders=async()=>{try{console.log('Loading folders...');const response=await folderAPI.getAllFolders();console.log('Folders loaded:',response.data);let loadedFolders=response.data||[];// Apply password protection from localStorage for offline mode\nif(!backendConnected){const protectedFolders=JSON.parse(localStorage.getItem('protectedFolders')||'{}');loadedFolders=loadedFolders.map(folder=>{const protection=protectedFolders[folder.id];return protection?_objectSpread(_objectSpread({},folder),protection):folder;});}setFolders(loadedFolders);}catch(error){console.error('Failed to load folders:',error);// Add some sample data for testing if backend is not working\nsetFolders([{id:1,name:'Documents',createdAt:new Date().toISOString(),parentId:null},{id:2,name:'Images',createdAt:new Date().toISOString(),parentId:null}]);}};const loadFiles=async()=>{try{console.log('Loading files...');const response=await documentAPI.getAllDocuments();console.log('Files loaded:',response.data);let loadedFiles=response.data||[];// Apply password protection from localStorage for offline mode\nif(!backendConnected){const protectedFiles=JSON.parse(localStorage.getItem('protectedFiles')||'{}');loadedFiles=loadedFiles.map(file=>{const protection=protectedFiles[file.id];return protection?_objectSpread(_objectSpread({},file),protection):file;});}setFiles(loadedFiles);}catch(error){console.error('Failed to load files:',error);setFiles([]);// Set empty array on error\n}};const loadActivityLogs=async()=>{try{console.log('Loading activity logs...');if(backendConnected){const response=await activityAPI.getUserLogs();console.log('Activity logs loaded:',response.data);setActivityLogs(response.data||[]);}else{// Load from localStorage as fallback\nconst localLogs=JSON.parse(localStorage.getItem('activityLogs')||'[]');setActivityLogs(localLogs);}}catch(error){console.error('Failed to load activity logs:',error);// Fallback to localStorage\nconst localLogs=JSON.parse(localStorage.getItem('activityLogs')||'[]');setActivityLogs(localLogs);}};// Activity Logger\nconst logActivity=async(action,details)=>{try{console.log('Logging activity:',action,details);if(backendConnected){await activityAPI.recordActivity(action,details);// Reload activity logs to get updated list\nloadActivityLogs();}else{// Fallback to localStorage\nconst newLog={id:Date.now(),action,details,timestamp:new Date().toISOString(),user:(user===null||user===void 0?void 0:user.email)||'Unknown'};const existingLogs=JSON.parse(localStorage.getItem('activityLogs')||'[]');existingLogs.unshift(newLog);localStorage.setItem('activityLogs',JSON.stringify(existingLogs));setActivityLogs(prev=>[newLog,...prev]);}}catch(error){console.error('Failed to log activity:',error);}};// File Upload Handler\n// Drag and drop handlers\nconst handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){handleFileUpload({target:{files:e.dataTransfer.files}});}};// Bulk actions\nconst handleSelectFile=fileId=>{if(fileId==='deselect-all'){setSelectedFiles([]);}else{setSelectedFiles(prev=>prev.includes(fileId)?prev.filter(id=>id!==fileId):[...prev,fileId]);}};const handleSelectAll=()=>{const currentFolderId=(currentFolder===null||currentFolder===void 0?void 0:currentFolder.id)||null;let currentFiles=files.filter(file=>{var _file$parentFolder;const fileFolderId=((_file$parentFolder=file.parentFolder)===null||_file$parentFolder===void 0?void 0:_file$parentFolder.id)||file.folderId||null;return fileFolderId===currentFolderId;});// Apply file filter if active\nif(fileFilter!=='all'){switch(fileFilter){case'photos':currentFiles=currentFiles.filter(file=>{var _split$pop;const ext=(_split$pop=(file.name||file.fileName||'').split('.').pop())===null||_split$pop===void 0?void 0:_split$pop.toLowerCase();return['jpg','jpeg','png','gif','bmp','svg','webp'].includes(ext);});break;case'documents':currentFiles=currentFiles.filter(file=>{var _split$pop2;const ext=(_split$pop2=(file.name||file.fileName||'').split('.').pop())===null||_split$pop2===void 0?void 0:_split$pop2.toLowerCase();return['pdf','doc','docx','txt','rtf','xls','xlsx','ppt','pptx'].includes(ext);});break;case'videos':currentFiles=currentFiles.filter(file=>{var _split$pop3;const ext=(_split$pop3=(file.name||file.fileName||'').split('.').pop())===null||_split$pop3===void 0?void 0:_split$pop3.toLowerCase();return['mp4','avi','mov','wmv','flv','webm','mkv'].includes(ext);});break;case'audio':currentFiles=currentFiles.filter(file=>{var _split$pop4;const ext=(_split$pop4=(file.name||file.fileName||'').split('.').pop())===null||_split$pop4===void 0?void 0:_split$pop4.toLowerCase();return['mp3','wav','flac','aac','ogg','m4a'].includes(ext);});break;}}setSelectedFiles(currentFiles.map(f=>f.id));};const handleBulkDelete=async()=>{if(selectedFiles.length===0)return;if(window.confirm(\"Delete \".concat(selectedFiles.length,\" selected files?\"))){for(const fileId of selectedFiles){const file=files.find(f=>f.id===fileId);if(file){await handleDeleteFile(file);}}setSelectedFiles([]);}};const handleFileUpload=async event=>{const fileList=event.target.files;if(!fileList||fileList.length===0)return;console.log('Starting file upload:',fileList.length,'files');setIsUploading(true);try{// Handle multiple files\nfor(let i=0;i<fileList.length;i++){const file=fileList[i];if(backendConnected){// Create FormData for file upload\nconst formData=new FormData();formData.append('file',file);formData.append('fileName',file.name);formData.append('fileType',getFileType(file.name));if(currentFolder){formData.append('folderId',currentFolder.id);}console.log('Uploading file to backend:',file.name);const response=await documentAPI.uploadDocument(formData);console.log('Upload response:',response.data);await logActivity('UPLOAD',{fileName:file.name,fileSize:formatFileSize(file.size),folderId:currentFolder===null||currentFolder===void 0?void 0:currentFolder.id,fileId:response.data.id});}else{// Offline mode - simulate upload\nconsole.log('Offline mode: simulating file upload:',file.name);const newFile={id:Date.now()+i,name:file.name,fileName:file.name,fileType:getFileType(file.name),size:file.size,fileSize:file.size,uploadedAt:new Date().toISOString(),uploadDate:new Date().toISOString(),parentFolder:currentFolder?{id:currentFolder.id}:null,folderId:(currentFolder===null||currentFolder===void 0?void 0:currentFolder.id)||null,tags:[],// For future tagging feature\nexpiryDate:null// For document expiration\n};setFiles(prev=>[newFile,...prev]);const newLog={id:Date.now()+i,action:'UPLOAD',details:{fileName:file.name,fileSize:formatFileSize(file.size)},timestamp:new Date().toISOString()};setActivityLogs(prev=>[newLog,...prev]);}}// Reload files if backend connected\nif(backendConnected){await loadFiles();}alert(\"\".concat(fileList.length,\" file(s) uploaded successfully!\"));}catch(error){var _error$response,_error$response$data;console.error(\"Upload failed:\",error);alert(\"File upload failed: \"+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message));}finally{setIsUploading(false);if(event.target.value)event.target.value=null;}};// Folder Creation Handler\nconst handleCreateFolder=async folderName=>{try{console.log('Creating folder:',folderName);if(backendConnected){const folderData={name:folderName,parentId:(currentFolder===null||currentFolder===void 0?void 0:currentFolder.id)||null};console.log('Folder data:',folderData);const response=await folderAPI.createFolder(folderData);console.log('Folder created:',response.data);// Reload folders to get updated list\nawait loadFolders();// Log activity\nawait logActivity('CREATE_FOLDER',{folderName,parentId:currentFolder===null||currentFolder===void 0?void 0:currentFolder.id});}else{// Offline mode - simulate folder creation\nconsole.log('Offline mode: simulating folder creation');const newFolder={id:Date.now(),name:folderName,createdAt:new Date().toISOString(),createdDate:new Date().toISOString(),parentId:(currentFolder===null||currentFolder===void 0?void 0:currentFolder.id)||null,parentFolder:currentFolder?{id:currentFolder.id}:null};setFolders(prev=>[newFolder,...prev]);// Add to activity logs\nconst newLog={id:Date.now(),action:'CREATE_FOLDER',details:{folderName},timestamp:new Date().toISOString()};setActivityLogs(prev=>[newLog,...prev]);}alert('Folder created successfully!');}catch(error){var _error$response2,_error$response2$data;console.error('Failed to create folder:',error);console.error('Error response:',error.response);alert('Failed to create folder: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message));}};// Folder Navigation Handlers\nconst handleFolderClick=folder=>{if(folder.isPasswordProtected){setPendingFolder(folder);setShowFolderPasswordVerifyModal(true);}else{setCurrentFolder(folder);setBreadcrumb(prev=>[...prev,folder]);logActivity('OPEN_FOLDER',{folderName:folder.name,folderId:folder.id});}};const handleBreadcrumbClick=index=>{if(index===-1){// Go to root\nsetCurrentFolder(null);setBreadcrumb([]);}else{// Go to specific folder in breadcrumb\nconst targetFolder=breadcrumb[index];setCurrentFolder(targetFolder);setBreadcrumb(prev=>prev.slice(0,index+1));}};// File Delete Handler\nconst handleDeleteFile=async file=>{try{await documentAPI.deleteDocument(file.id);// Reload files to get updated list\nawait loadFiles();// Log activity\nawait logActivity('DELETE',{fileName:file.fileName,fileId:file.id});}catch(error){var _error$response3,_error$response3$data;console.error('Failed to delete file:',error);alert('Failed to delete file: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||error.message));throw error;// Re-throw to handle in modal\n}};// File Download Handler\nconst handleDownloadFile=async file=>{try{const response=await documentAPI.downloadDocument(file.id);// Handle different response types\nlet blob;if(response.data instanceof Blob){blob=response.data;}else{blob=new Blob([response.data]);}// Create blob URL and trigger download\nconst url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=file.fileName||file.name||'download';link.style.display='none';document.body.appendChild(link);link.click();// Clean up\nsetTimeout(()=>{document.body.removeChild(link);window.URL.revokeObjectURL(url);},100);// Log activity\nawait logActivity('DOWNLOAD',{fileName:file.fileName||file.name,fileId:file.id});}catch(error){var _error$response4,_error$response4$data;console.error('Failed to download file:',error);alert('Failed to download file: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||error.message));}};// File Click Handler\nconst handleFileClick=file=>{if(file.isPasswordProtected){setPendingFile(file);setShowPasswordVerifyModal(true);}else{setModalFile(file);setIsModalOpen(true);// Set up global handlers for security modals\nwindow.onShowPasswordModal=file=>{setModalFile(file);setShowEnhancedPasswordModal(true);setIsModalOpen(false);};window.onShowShareModal=file=>{setModalFile(file);setShowShareModal(true);setIsModalOpen(false);};}};// Password Protection Handlers\nconst handleSetPassword=async(fileId,password)=>{try{var _files$find;console.log('Setting password for file:',fileId,'Backend connected:',backendConnected);if(backendConnected){console.log('Calling backend API to set password...');const response=await documentAPI.setPassword(fileId,password);console.log('Backend response:',response);// Reload files to get updated data from backend\nconsole.log('Reloading files from backend...');await loadFiles();}else{console.log('Using offline mode for password protection...');// Fallback for offline mode\nconst protectedFiles=JSON.parse(localStorage.getItem('protectedFiles')||'{}');protectedFiles[fileId]={isPasswordProtected:true,passwordHash:btoa(password)};localStorage.setItem('protectedFiles',JSON.stringify(protectedFiles));console.log('Saved to localStorage:',protectedFiles);// Update local state\nsetFiles(prev=>prev.map(f=>f.id===fileId?_objectSpread(_objectSpread({},f),{},{isPasswordProtected:true}):f));}await logActivity('SET_PASSWORD',{fileId,fileName:(_files$find=files.find(f=>f.id===fileId))===null||_files$find===void 0?void 0:_files$find.name});alert('Password protection enabled!');}catch(error){var _error$response5,_error$response6,_error$response6$data;console.error('Failed to set password:',error);console.error('Error details:',((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.data)||error.message);alert('Failed to set password: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||error.message));}};const handleRemovePassword=async fileId=>{try{var _files$find2;if(backendConnected){await documentAPI.removePassword(fileId);// Reload files to get updated data from backend\nawait loadFiles();}else{// Fallback for offline mode\nconst protectedFiles=JSON.parse(localStorage.getItem('protectedFiles')||'{}');delete protectedFiles[fileId];localStorage.setItem('protectedFiles',JSON.stringify(protectedFiles));setFiles(prev=>prev.map(f=>f.id===fileId?_objectSpread(_objectSpread({},f),{},{isPasswordProtected:false}):f));}await logActivity('REMOVE_PASSWORD',{fileId,fileName:(_files$find2=files.find(f=>f.id===fileId))===null||_files$find2===void 0?void 0:_files$find2.name});alert('Password protection removed!');}catch(error){console.error('Failed to remove password:',error);alert('Failed to remove password');}};const handleVerifyPassword=async(fileId,password)=>{try{const file=files.find(f=>f.id===fileId);if(backendConnected){await documentAPI.verifyPassword(fileId,password);}else{// Fallback to localStorage verification\nconst protectedFiles=JSON.parse(localStorage.getItem('protectedFiles')||'{}');const protection=protectedFiles[fileId];if(!protection||protection.passwordHash!==btoa(password)){throw new Error('Invalid password');}}await logActivity('PASSWORD_VERIFIED',{fileId,fileName:file.name});// Open file directly after password verification\nsetModalFile(file);setIsModalOpen(true);setShowPasswordVerifyModal(false);setPendingFile(null);// Set up global handlers for security modals\nwindow.onShowPasswordModal=file=>{setModalFile(file);setShowEnhancedPasswordModal(true);setIsModalOpen(false);};window.onShowShareModal=file=>{setModalFile(file);setShowShareModal(true);setIsModalOpen(false);};}catch(error){throw error;}};const handleVerifyOTP=async otp=>{try{await otpAPI.verifyOTP(otp);if(pendingOTPFile){// Handle file OTP verification\nawait logActivity('OTP_VERIFIED',{fileId:pendingOTPFile.id,fileName:pendingOTPFile.name});// Open file after successful OTP verification\nsetModalFile(pendingOTPFile);setIsModalOpen(true);setShowOTPModal(false);setPendingOTPFile(null);// Set up global handlers for security modals\nwindow.onShowPasswordModal=file=>{setModalFile(file);setShowEnhancedPasswordModal(true);setIsModalOpen(false);};window.onShowShareModal=file=>{setModalFile(file);setShowShareModal(true);setIsModalOpen(false);};}else if(pendingFolder){// Handle folder OTP verification\nawait logActivity('FOLDER_OTP_VERIFIED',{folderId:pendingFolder.id,folderName:pendingFolder.name});// Open folder after successful OTP verification\nsetCurrentFolder(pendingFolder);setBreadcrumb(prev=>[...prev,pendingFolder]);setShowOTPModal(false);setPendingFolder(null);await logActivity('OPEN_FOLDER',{folderName:pendingFolder.name,folderId:pendingFolder.id});}}catch(error){throw error;}};const handleShareFile=async(fileId,email,permission)=>{try{var _files$find3;// In real app, this would call backend API\nconst shareData={fileId,email,permission,sharedAt:new Date().toISOString()};// Store share info in localStorage for demo\nconst existingShares=JSON.parse(localStorage.getItem('fileShares')||'[]');existingShares.push(shareData);localStorage.setItem('fileShares',JSON.stringify(existingShares));await logActivity('SHARE_FILE',{fileId,fileName:(_files$find3=files.find(f=>f.id===fileId))===null||_files$find3===void 0?void 0:_files$find3.name,sharedWith:email,permission});alert(\"File shared with \".concat(email,\" (\").concat(permission,\" access)\"));}catch(error){console.error('Failed to share file:',error);alert('Failed to share file');}};// File Rename Handler\nconst handleRenameFile=async(fileId,newName)=>{try{const oldName=(modalFile===null||modalFile===void 0?void 0:modalFile.fileName)||(modalFile===null||modalFile===void 0?void 0:modalFile.name);// Update local state immediately\nsetFiles(prev=>prev.map(f=>f.id===fileId?_objectSpread(_objectSpread({},f),{},{name:newName,fileName:newName}):f));// Update modal file immediately\nif(modalFile&&modalFile.id===fileId){setModalFile(prev=>_objectSpread(_objectSpread({},prev),{},{name:newName,fileName:newName}));}// Log activity\nawait logActivity('RENAME',{fileId,oldName,newName,fileName:newName});if(backendConnected){// Call backend API to rename file\nawait documentAPI.renameDocument(fileId,newName);console.log('File renamed on backend');}}catch(error){var _error$response7,_error$response7$data;console.error('Failed to rename file:',error);// Revert local changes on error\nsetFiles(prev=>prev.map(f=>f.id===fileId?_objectSpread(_objectSpread({},f),{},{name:modalFile===null||modalFile===void 0?void 0:modalFile.name,fileName:modalFile===null||modalFile===void 0?void 0:modalFile.fileName}):f));alert('Failed to rename file: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||error.message));throw error;}};// Folder Delete Handler\nconst handleFolderDelete=async folder=>{if(window.confirm(\"Delete folder \\\"\".concat(folder.name,\"\\\"? This will also delete all files inside it.\"))){try{if(backendConnected){await folderAPI.deleteFolder(folder.id);}// Remove folder from local state\nsetFolders(prev=>prev.filter(f=>f.id!==folder.id));// Log activity\nawait logActivity('DELETE_FOLDER',{folderName:folder.name,folderId:folder.id});alert('Folder deleted successfully!');}catch(error){var _error$response8,_error$response8$data;console.error('Failed to delete folder:',error);alert('Failed to delete folder: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||error.message));}}};// Folder Selection Handler\nconst handleSelectFolder=folderId=>{setSelectedFolders(prev=>prev.includes(folderId)?prev.filter(id=>id!==folderId):[...prev,folderId]);};// Bulk Folder Delete Handler\nconst handleBulkFolderDelete=async()=>{if(selectedFolders.length===0)return;if(window.confirm(\"Delete \".concat(selectedFolders.length,\" selected folders? This will also delete all files inside them.\"))){for(const folderId of selectedFolders){const folder=folders.find(f=>f.id===folderId);if(folder){await handleFolderDelete(folder);}}setSelectedFolders([]);}};// File View Handler\nconst handleViewFile=async file=>{try{// Log view activity\nawait logActivity('VIEW',{fileName:file.fileName||file.name,fileId:file.id});// Always use the file viewer modal for proper authentication\nsetViewerFile(file);setIsFileViewerOpen(true);}catch(error){var _error$response9,_error$response9$data;console.error('Failed to view file:',error);alert('Failed to view file: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||error.message));}};// Folder Password Protection Handlers\nconst handleSetFolderPassword=async(folderId,password)=>{try{var _folders$find;if(backendConnected){await folderAPI.setPassword(folderId,password);// Reload folders to get updated data from backend\nawait loadFolders();}else{// Fallback for offline mode\nconst protectedFolders=JSON.parse(localStorage.getItem('protectedFolders')||'{}');protectedFolders[folderId]={isPasswordProtected:true,passwordHash:btoa(password)};localStorage.setItem('protectedFolders',JSON.stringify(protectedFolders));// Update local state\nsetFolders(prev=>prev.map(f=>f.id===folderId?_objectSpread(_objectSpread({},f),{},{isPasswordProtected:true}):f));}await logActivity('SET_FOLDER_PASSWORD',{folderId,folderName:(_folders$find=folders.find(f=>f.id===folderId))===null||_folders$find===void 0?void 0:_folders$find.name});alert('Folder password protection enabled!');}catch(error){console.error('Failed to set folder password:',error);alert('Failed to set folder password');}};const handleRemoveFolderPassword=async folderId=>{try{var _folders$find2;if(backendConnected){await folderAPI.removePassword(folderId);// Reload folders to get updated data from backend\nawait loadFolders();}else{// Fallback for offline mode\nconst protectedFolders=JSON.parse(localStorage.getItem('protectedFolders')||'{}');delete protectedFolders[folderId];localStorage.setItem('protectedFolders',JSON.stringify(protectedFolders));setFolders(prev=>prev.map(f=>f.id===folderId?_objectSpread(_objectSpread({},f),{},{isPasswordProtected:false}):f));}await logActivity('REMOVE_FOLDER_PASSWORD',{folderId,folderName:(_folders$find2=folders.find(f=>f.id===folderId))===null||_folders$find2===void 0?void 0:_folders$find2.name});alert('Folder password protection removed!');}catch(error){console.error('Failed to remove folder password:',error);alert('Failed to remove folder password');}};const handleVerifyFolderPassword=async(folderId,password)=>{try{const folder=folders.find(f=>f.id===folderId);if(backendConnected){await folderAPI.verifyPassword(folderId,password);}else{// Fallback to localStorage verification\nconst protectedFolders=JSON.parse(localStorage.getItem('protectedFolders')||'{}');const protection=protectedFolders[folderId];if(!protection||protection.passwordHash!==btoa(password)){throw new Error('Invalid password');}}await logActivity('FOLDER_PASSWORD_VERIFIED',{folderId,folderName:folder.name});// Open folder immediately after successful verification\nsetCurrentFolder(folder);setBreadcrumb(prev=>[...prev,folder]);setShowFolderPasswordVerifyModal(false);setPendingFolder(null);await logActivity('OPEN_FOLDER',{folderName:folder.name,folderId:folder.id});}catch(error){throw error;}};const renderContent=()=>{switch(activeView){case'My Files':return/*#__PURE__*/_jsx(DropboxMyFilesView,{files:files,folders:folders,currentFolder:currentFolder,breadcrumb:breadcrumb,searchTerm:searchTerm,setSearchTerm:setSearchTerm,filterType:filterType,setFilterType:setFilterType,sortBy:sortBy,setSortBy:setSortBy,sortOrder:sortOrder,setSortOrder:setSortOrder,selectedFiles:selectedFiles,handleSelectFile:handleSelectFile,handleSelectAll:handleSelectAll,handleBulkDelete:handleBulkDelete,handleFolderClick:handleFolderClick,handleBreadcrumbClick:handleBreadcrumbClick,handleFileClick:handleFileClick,setIsNewFolderModalOpen:setIsNewFolderModalOpen,fileInputRef:fileInputRef,handleFileUpload:handleFileUpload,isUploading:isUploading,dragActive:dragActive,handleDrag:handleDrag,handleDrop:handleDrop,fileFilter:fileFilter,handleFolderDelete:handleFolderDelete,selectedFolders:selectedFolders,handleSelectFolder:handleSelectFolder,handleBulkFolderDelete:handleBulkFolderDelete});case'History':return/*#__PURE__*/_jsx(DropboxHistoryView,{files:files});case'Activity Logs':return/*#__PURE__*/_jsx(DropboxActivityLogView,{activityLogs:activityLogs});default:return/*#__PURE__*/_jsx(DropboxMyFilesView,{files:files,folders:folders,currentFolder:currentFolder,breadcrumb:breadcrumb,searchTerm:searchTerm,setSearchTerm:setSearchTerm,filterType:filterType,setFilterType:setFilterType,sortBy:sortBy,setSortBy:setSortBy,sortOrder:sortOrder,setSortOrder:setSortOrder,selectedFiles:selectedFiles,handleSelectFile:handleSelectFile,handleSelectAll:handleSelectAll,handleBulkDelete:handleBulkDelete,handleFolderClick:handleFolderClick,handleBreadcrumbClick:handleBreadcrumbClick,handleFileClick:handleFileClick,setIsNewFolderModalOpen:setIsNewFolderModalOpen,fileInputRef:fileInputRef,handleFileUpload:handleFileUpload,isUploading:isUploading,dragActive:dragActive,handleDrag:handleDrag,handleDrop:handleDrop,fileFilter:fileFilter});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-screen font-sans antialiased\",style:{backgroundColor:COLORS.offWhite,margin:0,padding:0,position:'fixed',top:'64px',left:0,right:0,bottom:0,height:'calc(100vh - 64px)'},children:[/*#__PURE__*/_jsx(Sidebar,{activeView:activeView,setActiveView:setActiveView,fileFilter:fileFilter,setFileFilter:setFileFilter}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col overflow-hidden\",style:{margin:0,padding:0},children:[/*#__PURE__*/_jsx(Header,{title:activeView,backendConnected:backendConnected}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden\",style:{margin:0,padding:0},children:renderContent()})]}),/*#__PURE__*/_jsx(FileDetailModal,{file:modalFile,isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),onDeleteFile:handleDeleteFile,onDownloadFile:handleDownloadFile,onRenameFile:handleRenameFile,onViewFile:handleViewFile}),/*#__PURE__*/_jsx(NewFolderModal,{isOpen:isNewFolderModalOpen,onClose:()=>setIsNewFolderModalOpen(false),onCreateFolder:handleCreateFolder}),/*#__PURE__*/_jsx(FileViewer,{file:viewerFile,isOpen:isFileViewerOpen,onClose:()=>{setIsFileViewerOpen(false);setViewerFile(null);}}),/*#__PURE__*/_jsx(PasswordProtectionModal,{isOpen:showPasswordModal,onClose:()=>setShowPasswordModal(false),file:modalFile,onSetPassword:handleSetPassword,onRemovePassword:handleRemovePassword}),/*#__PURE__*/_jsx(EnhancedPasswordProtectionModal,{isOpen:showEnhancedPasswordModal,onClose:()=>setShowEnhancedPasswordModal(false),file:modalFile,onSetPassword:handleSetPassword,onRemovePassword:handleRemovePassword}),/*#__PURE__*/_jsx(OTPVerificationModal,{isOpen:showOTPModal,onClose:()=>{setShowOTPModal(false);setPendingOTPFile(null);setPendingFolder(null);},file:pendingOTPFile,folder:pendingFolder,onVerify:handleVerifyOTP}),/*#__PURE__*/_jsx(PasswordVerificationModal,{isOpen:showPasswordVerifyModal,onClose:()=>{setShowPasswordVerifyModal(false);setPendingFile(null);},file:pendingFile,onVerify:handleVerifyPassword}),/*#__PURE__*/_jsx(SharePermissionsModal,{isOpen:showShareModal,onClose:()=>setShowShareModal(false),file:modalFile,onShare:handleShareFile}),/*#__PURE__*/_jsx(FolderPasswordProtectionModal,{isOpen:showFolderPasswordModal,onClose:()=>setShowFolderPasswordModal(false),folder:modalFolder,onSetPassword:handleSetFolderPassword,onRemovePassword:handleRemoveFolderPassword}),/*#__PURE__*/_jsx(FolderPasswordVerificationModal,{isOpen:showFolderPasswordVerifyModal,onClose:()=>{setShowFolderPasswordVerifyModal(false);setPendingFolder(null);},folder:pendingFolder,onVerify:handleVerifyFolderPassword})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","documentAPI","folderAPI","activityAPI","otpAPI","COLORS","formatFileSize","getFileType","Sidebar","Header","FileDetailModal","NewFolderModal","MyFilesView","HistoryView","ActivityLogView","DropboxMyFilesView","DropboxHistoryView","DropboxActivityLogView","PasswordProtectionModal","PasswordVerificationModal","SharePermissionsModal","FolderPasswordProtectionModal","FolderPasswordVerificationModal","OTPVerificationModal","EnhancedPasswordProtectionModal","FileViewer","jsx","_jsx","jsxs","_jsxs","UserFileDashboard","user","activeView","setActiveView","files","setFiles","folders","setFolders","activityLogs","setActivityLogs","isModalOpen","setIsModalOpen","modalFile","setModalFile","isNewFolderModalOpen","setIsNewFolderModalOpen","isUploading","setIsUploading","currentFolder","setCurrentFolder","breadcrumb","setBreadcrumb","backendConnected","setBackendConnected","isFileViewerOpen","setIsFileViewerOpen","viewerFile","setViewerFile","searchTerm","setSearchTerm","sortBy","setSortBy","sortOrder","setSortOrder","filterType","setFilterType","selectedFiles","setSelectedFiles","dragActive","setDragActive","fileFilter","setFileFilter","selectedFolders","setSelectedFolders","showPasswordModal","setShowPasswordModal","showPasswordVerifyModal","setShowPasswordVerifyModal","showShareModal","setShowShareModal","pendingFile","setPendingFile","showFolderPasswordModal","setShowFolderPasswordModal","showFolderPasswordVerifyModal","setShowFolderPasswordVerifyModal","pendingFolder","setPendingFolder","modalFolder","setModalFolder","showOTPModal","setShowOTPModal","pendingOTPFile","setPendingOTPFile","showEnhancedPasswordModal","setShowEnhancedPasswordModal","fileInputRef","console","log","testBackendConnection","loadFolders","loadFiles","loadActivityLogs","window","onShowFolderPasswordModal","folder","onShowPasswordVerificationModal","file","token","localStorage","getItem","response","fetch","headers","concat","status","statusText","ok","data","json","error","warn","getAllFolders","loadedFolders","protectedFolders","JSON","parse","map","protection","id","_objectSpread","name","createdAt","Date","toISOString","parentId","getAllDocuments","loadedFiles","protectedFiles","getUserLogs","localLogs","logActivity","action","details","recordActivity","newLog","now","timestamp","email","existingLogs","unshift","setItem","stringify","prev","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","handleFileUpload","target","handleSelectFile","fileId","includes","filter","handleSelectAll","currentFolderId","currentFiles","_file$parentFolder","fileFolderId","parentFolder","folderId","_split$pop","ext","fileName","split","pop","toLowerCase","_split$pop2","_split$pop3","_split$pop4","f","handleBulkDelete","length","confirm","find","handleDeleteFile","event","fileList","i","formData","FormData","append","uploadDocument","fileSize","size","newFile","fileType","uploadedAt","uploadDate","tags","expiryDate","alert","_error$response","_error$response$data","message","value","handleCreateFolder","folderName","folderData","createFolder","newFolder","createdDate","_error$response2","_error$response2$data","handleFolderClick","isPasswordProtected","handleBreadcrumbClick","index","targetFolder","slice","deleteDocument","_error$response3","_error$response3$data","handleDownloadFile","downloadDocument","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","style","display","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","_error$response4","_error$response4$data","handleFileClick","onShowPasswordModal","onShowShareModal","handleSetPassword","password","_files$find","setPassword","passwordHash","btoa","_error$response5","_error$response6","_error$response6$data","handleRemovePassword","_files$find2","removePassword","handleVerifyPassword","verifyPassword","Error","handleVerifyOTP","otp","verifyOTP","handleShareFile","permission","_files$find3","shareData","sharedAt","existingShares","push","sharedWith","handleRenameFile","newName","oldName","renameDocument","_error$response7","_error$response7$data","handleFolderDelete","deleteFolder","_error$response8","_error$response8$data","handleSelectFolder","handleBulkFolderDelete","handleViewFile","_error$response9","_error$response9$data","handleSetFolderPassword","_folders$find","handleRemoveFolderPassword","_folders$find2","handleVerifyFolderPassword","renderContent","className","backgroundColor","offWhite","margin","padding","position","top","left","right","bottom","height","children","title","isOpen","onClose","onDeleteFile","onDownloadFile","onRenameFile","onViewFile","onCreateFolder","onSetPassword","onRemovePassword","onVerify","onShare"],"sources":["c:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/src/components/dashboard/UserFileDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { documentAPI, folderAPI, activityAPI, otpAPI } from '../../services/api';\nimport { COLORS, formatFileSize, getFileType } from './DashboardUtils';\nimport { \n    Sidebar, \n    Header, \n    FileDetailModal, \n    NewFolderModal \n} from './DashboardComponents';\nimport { MyFilesView, HistoryView, ActivityLogView } from './FileViews';\nimport { DropboxMyFilesView, DropboxHistoryView, DropboxActivityLogView } from './DropboxStyleFileViews';\nimport { PasswordProtectionModal, PasswordVerificationModal, SharePermissionsModal, FolderPasswordProtectionModal, FolderPasswordVerificationModal } from '../modals/SecurityModals';\nimport { OTPVerificationModal, EnhancedPasswordProtectionModal } from '../modals/EnhancedSecurityModals';\nimport FileViewer from '../viewers/FileViewer';\n\nexport default function UserFileDashboard() {\n    const { user } = useAuth();\n    const [activeView, setActiveView] = useState('My Files');\n    const [files, setFiles] = useState([]);\n    const [folders, setFolders] = useState([]);\n    const [activityLogs, setActivityLogs] = useState([]);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [modalFile, setModalFile] = useState(null);\n    const [isNewFolderModalOpen, setIsNewFolderModalOpen] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [currentFolder, setCurrentFolder] = useState(null);\n    const [breadcrumb, setBreadcrumb] = useState([]);\n    const [backendConnected, setBackendConnected] = useState(true);\n    const [isFileViewerOpen, setIsFileViewerOpen] = useState(false);\n    const [viewerFile, setViewerFile] = useState(null);\n    \n    // Professional features state\n    const [searchTerm, setSearchTerm] = useState('');\n    const [sortBy, setSortBy] = useState('uploadDate');\n    const [sortOrder, setSortOrder] = useState('desc');\n    const [filterType, setFilterType] = useState('all');\n    const [selectedFiles, setSelectedFiles] = useState([]);\n    const [dragActive, setDragActive] = useState(false);\n    const [fileFilter, setFileFilter] = useState('all');\n    const [selectedFolders, setSelectedFolders] = useState([]);\n    const [showPasswordModal, setShowPasswordModal] = useState(false);\n    const [showPasswordVerifyModal, setShowPasswordVerifyModal] = useState(false);\n    const [showShareModal, setShowShareModal] = useState(false);\n    const [pendingFile, setPendingFile] = useState(null);\n    const [showFolderPasswordModal, setShowFolderPasswordModal] = useState(false);\n    const [showFolderPasswordVerifyModal, setShowFolderPasswordVerifyModal] = useState(false);\n    const [pendingFolder, setPendingFolder] = useState(null);\n    const [modalFolder, setModalFolder] = useState(null);\n    const [showOTPModal, setShowOTPModal] = useState(false);\n    const [pendingOTPFile, setPendingOTPFile] = useState(null);\n    const [showEnhancedPasswordModal, setShowEnhancedPasswordModal] = useState(false);\n    \n    const fileInputRef = useRef(null);\n\n    // Load data from backend\n    useEffect(() => {\n        if (user) {\n            console.log('Loading data for user:', user);\n            // Test backend connectivity first\n            testBackendConnection();\n            loadFolders();\n            loadFiles();\n            loadActivityLogs();\n            \n            // Set up global handlers for password modals\n            window.onShowFolderPasswordModal = (folder) => {\n                setModalFolder(folder);\n                setShowFolderPasswordModal(true);\n            };\n            \n            window.onShowPasswordVerificationModal = (file) => {\n                setPendingFile(file);\n                setShowPasswordVerifyModal(true);\n            };\n        }\n    }, [user]);\n\n    const testBackendConnection = async () => {\n        try {\n            console.log('Testing backend connection...');\n            const token = localStorage.getItem('accessToken');\n            if (!token) {\n                console.log('No access token found');\n                setBackendConnected(false);\n                return;\n            }\n            \n            const response = await fetch('http://localhost:8080/api/auth/me', {\n                headers: {\n                    'Authorization': `Bearer ${token}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n            \n            console.log('Backend connection test:', response.status, response.statusText);\n            if (response.ok) {\n                const data = await response.json();\n                console.log('Backend user data:', data);\n                setBackendConnected(true);\n            } else if (response.status === 401) {\n                console.log('Token expired or invalid');\n                setBackendConnected(false);\n            } else {\n                console.log('Backend connection failed with status:', response.status);\n                setBackendConnected(false);\n            }\n        } catch (error) {\n            console.error('Backend connection failed:', error);\n            setBackendConnected(false);\n            console.warn('Running in offline mode with sample data');\n        }\n    };\n\n    const loadFolders = async () => {\n        try {\n            console.log('Loading folders...');\n            const response = await folderAPI.getAllFolders();\n            console.log('Folders loaded:', response.data);\n            let loadedFolders = response.data || [];\n            \n            // Apply password protection from localStorage for offline mode\n            if (!backendConnected) {\n                const protectedFolders = JSON.parse(localStorage.getItem('protectedFolders') || '{}');\n                loadedFolders = loadedFolders.map(folder => {\n                    const protection = protectedFolders[folder.id];\n                    return protection ? { ...folder, ...protection } : folder;\n                });\n            }\n            \n            setFolders(loadedFolders);\n        } catch (error) {\n            console.error('Failed to load folders:', error);\n            // Add some sample data for testing if backend is not working\n            setFolders([\n                { id: 1, name: 'Documents', createdAt: new Date().toISOString(), parentId: null },\n                { id: 2, name: 'Images', createdAt: new Date().toISOString(), parentId: null },\n            ]);\n        }\n    };\n\n    const loadFiles = async () => {\n        try {\n            console.log('Loading files...');\n            const response = await documentAPI.getAllDocuments();\n            console.log('Files loaded:', response.data);\n            let loadedFiles = response.data || [];\n            \n            // Apply password protection from localStorage for offline mode\n            if (!backendConnected) {\n                const protectedFiles = JSON.parse(localStorage.getItem('protectedFiles') || '{}');\n                loadedFiles = loadedFiles.map(file => {\n                    const protection = protectedFiles[file.id];\n                    return protection ? { ...file, ...protection } : file;\n                });\n            }\n            \n            setFiles(loadedFiles);\n        } catch (error) {\n            console.error('Failed to load files:', error);\n            setFiles([]); // Set empty array on error\n        }\n    };\n\n    const loadActivityLogs = async () => {\n        try {\n            console.log('Loading activity logs...');\n            \n            if (backendConnected) {\n                const response = await activityAPI.getUserLogs();\n                console.log('Activity logs loaded:', response.data);\n                setActivityLogs(response.data || []);\n            } else {\n                // Load from localStorage as fallback\n                const localLogs = JSON.parse(localStorage.getItem('activityLogs') || '[]');\n                setActivityLogs(localLogs);\n            }\n        } catch (error) {\n            console.error('Failed to load activity logs:', error);\n            // Fallback to localStorage\n            const localLogs = JSON.parse(localStorage.getItem('activityLogs') || '[]');\n            setActivityLogs(localLogs);\n        }\n    };\n\n    // Activity Logger\n    const logActivity = async (action, details) => {\n        try {\n            console.log('Logging activity:', action, details);\n            \n            if (backendConnected) {\n                await activityAPI.recordActivity(action, details);\n                // Reload activity logs to get updated list\n                loadActivityLogs();\n            } else {\n                // Fallback to localStorage\n                const newLog = {\n                    id: Date.now(),\n                    action,\n                    details,\n                    timestamp: new Date().toISOString(),\n                    user: user?.email || 'Unknown'\n                };\n                \n                const existingLogs = JSON.parse(localStorage.getItem('activityLogs') || '[]');\n                existingLogs.unshift(newLog);\n                localStorage.setItem('activityLogs', JSON.stringify(existingLogs));\n                setActivityLogs(prev => [newLog, ...prev]);\n            }\n        } catch (error) {\n            console.error('Failed to log activity:', error);\n        }\n    };\n\n    // File Upload Handler\n    // Drag and drop handlers\n    const handleDrag = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.type === 'dragenter' || e.type === 'dragover') {\n            setDragActive(true);\n        } else if (e.type === 'dragleave') {\n            setDragActive(false);\n        }\n    };\n\n    const handleDrop = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDragActive(false);\n        \n        if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n            handleFileUpload({ target: { files: e.dataTransfer.files } });\n        }\n    };\n\n    // Bulk actions\n    const handleSelectFile = (fileId) => {\n        if (fileId === 'deselect-all') {\n            setSelectedFiles([]);\n        } else {\n            setSelectedFiles(prev => \n                prev.includes(fileId) \n                    ? prev.filter(id => id !== fileId)\n                    : [...prev, fileId]\n            );\n        }\n    };\n\n    const handleSelectAll = () => {\n        const currentFolderId = currentFolder?.id || null;\n        let currentFiles = files.filter(file => {\n            const fileFolderId = file.parentFolder?.id || file.folderId || null;\n            return fileFolderId === currentFolderId;\n        });\n        \n        // Apply file filter if active\n        if (fileFilter !== 'all') {\n            switch (fileFilter) {\n                case 'photos':\n                    currentFiles = currentFiles.filter(file => {\n                        const ext = (file.name || file.fileName || '').split('.').pop()?.toLowerCase();\n                        return ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg', 'webp'].includes(ext);\n                    });\n                    break;\n                case 'documents':\n                    currentFiles = currentFiles.filter(file => {\n                        const ext = (file.name || file.fileName || '').split('.').pop()?.toLowerCase();\n                        return ['pdf', 'doc', 'docx', 'txt', 'rtf', 'xls', 'xlsx', 'ppt', 'pptx'].includes(ext);\n                    });\n                    break;\n                case 'videos':\n                    currentFiles = currentFiles.filter(file => {\n                        const ext = (file.name || file.fileName || '').split('.').pop()?.toLowerCase();\n                        return ['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm', 'mkv'].includes(ext);\n                    });\n                    break;\n                case 'audio':\n                    currentFiles = currentFiles.filter(file => {\n                        const ext = (file.name || file.fileName || '').split('.').pop()?.toLowerCase();\n                        return ['mp3', 'wav', 'flac', 'aac', 'ogg', 'm4a'].includes(ext);\n                    });\n                    break;\n            }\n        }\n        \n        setSelectedFiles(currentFiles.map(f => f.id));\n    };\n\n    const handleBulkDelete = async () => {\n        if (selectedFiles.length === 0) return;\n        \n        if (window.confirm(`Delete ${selectedFiles.length} selected files?`)) {\n            for (const fileId of selectedFiles) {\n                const file = files.find(f => f.id === fileId);\n                if (file) {\n                    await handleDeleteFile(file);\n                }\n            }\n            setSelectedFiles([]);\n        }\n    };\n\n    const handleFileUpload = async (event) => {\n        const fileList = event.target.files;\n        if (!fileList || fileList.length === 0) return;\n\n        console.log('Starting file upload:', fileList.length, 'files');\n        setIsUploading(true);\n        \n        try {\n            // Handle multiple files\n            for (let i = 0; i < fileList.length; i++) {\n                const file = fileList[i];\n                \n                if (backendConnected) {\n                    // Create FormData for file upload\n                    const formData = new FormData();\n                    formData.append('file', file);\n                    formData.append('fileName', file.name);\n                    formData.append('fileType', getFileType(file.name));\n                    if (currentFolder) {\n                        formData.append('folderId', currentFolder.id);\n                    }\n\n                    console.log('Uploading file to backend:', file.name);\n                    const response = await documentAPI.uploadDocument(formData);\n                    console.log('Upload response:', response.data);\n                    \n                    await logActivity('UPLOAD', { \n                        fileName: file.name, \n                        fileSize: formatFileSize(file.size),\n                        folderId: currentFolder?.id,\n                        fileId: response.data.id\n                    });\n                } else {\n                    // Offline mode - simulate upload\n                    console.log('Offline mode: simulating file upload:', file.name);\n                    const newFile = {\n                        id: Date.now() + i,\n                        name: file.name,\n                        fileName: file.name,\n                        fileType: getFileType(file.name),\n                        size: file.size,\n                        fileSize: file.size,\n                        uploadedAt: new Date().toISOString(),\n                        uploadDate: new Date().toISOString(),\n                        parentFolder: currentFolder ? { id: currentFolder.id } : null,\n                        folderId: currentFolder?.id || null,\n                        tags: [], // For future tagging feature\n                        expiryDate: null, // For document expiration\n                    };\n                    setFiles(prev => [newFile, ...prev]);\n                    \n                    const newLog = {\n                        id: Date.now() + i,\n                        action: 'UPLOAD',\n                        details: { fileName: file.name, fileSize: formatFileSize(file.size) },\n                        timestamp: new Date().toISOString()\n                    };\n                    setActivityLogs(prev => [newLog, ...prev]);\n                }\n            }\n            \n            // Reload files if backend connected\n            if (backendConnected) {\n                await loadFiles();\n            }\n            \n            alert(`${fileList.length} file(s) uploaded successfully!`);\n            \n        } catch (error) {\n            console.error(\"Upload failed:\", error);\n            alert(\"File upload failed: \" + (error.response?.data?.error || error.message));\n        } finally {\n            setIsUploading(false);\n            if (event.target.value) event.target.value = null;\n        }\n    };\n\n    // Folder Creation Handler\n    const handleCreateFolder = async (folderName) => {\n        try {\n            console.log('Creating folder:', folderName);\n            \n            if (backendConnected) {\n                const folderData = {\n                    name: folderName,\n                    parentId: currentFolder?.id || null,\n                };\n                \n                console.log('Folder data:', folderData);\n                const response = await folderAPI.createFolder(folderData);\n                console.log('Folder created:', response.data);\n                \n                // Reload folders to get updated list\n                await loadFolders();\n                \n                // Log activity\n                await logActivity('CREATE_FOLDER', { \n                    folderName,\n                    parentId: currentFolder?.id \n                });\n            } else {\n                // Offline mode - simulate folder creation\n                console.log('Offline mode: simulating folder creation');\n                const newFolder = {\n                    id: Date.now(),\n                    name: folderName,\n                    createdAt: new Date().toISOString(),\n                    createdDate: new Date().toISOString(),\n                    parentId: currentFolder?.id || null,\n                    parentFolder: currentFolder ? { id: currentFolder.id } : null,\n                };\n                setFolders(prev => [newFolder, ...prev]);\n                \n                // Add to activity logs\n                const newLog = {\n                    id: Date.now(),\n                    action: 'CREATE_FOLDER',\n                    details: { folderName },\n                    timestamp: new Date().toISOString()\n                };\n                setActivityLogs(prev => [newLog, ...prev]);\n            }\n            \n            alert('Folder created successfully!');\n            \n        } catch (error) {\n            console.error('Failed to create folder:', error);\n            console.error('Error response:', error.response);\n            alert('Failed to create folder: ' + (error.response?.data?.error || error.message));\n        }\n    };\n\n    // Folder Navigation Handlers\n    const handleFolderClick = (folder) => {\n        if (folder.isPasswordProtected) {\n            setPendingFolder(folder);\n            setShowFolderPasswordVerifyModal(true);\n        } else {\n            setCurrentFolder(folder);\n            setBreadcrumb(prev => [...prev, folder]);\n            logActivity('OPEN_FOLDER', { \n                folderName: folder.name,\n                folderId: folder.id \n            });\n        }\n    };\n\n    const handleBreadcrumbClick = (index) => {\n        if (index === -1) {\n            // Go to root\n            setCurrentFolder(null);\n            setBreadcrumb([]);\n        } else {\n            // Go to specific folder in breadcrumb\n            const targetFolder = breadcrumb[index];\n            setCurrentFolder(targetFolder);\n            setBreadcrumb(prev => prev.slice(0, index + 1));\n        }\n    };\n\n    // File Delete Handler\n    const handleDeleteFile = async (file) => {\n        try {\n            await documentAPI.deleteDocument(file.id);\n            \n            // Reload files to get updated list\n            await loadFiles();\n            \n            // Log activity\n            await logActivity('DELETE', { \n                fileName: file.fileName,\n                fileId: file.id \n            });\n            \n        } catch (error) {\n            console.error('Failed to delete file:', error);\n            alert('Failed to delete file: ' + (error.response?.data?.error || error.message));\n            throw error; // Re-throw to handle in modal\n        }\n    };\n\n    // File Download Handler\n    const handleDownloadFile = async (file) => {\n        try {\n            const response = await documentAPI.downloadDocument(file.id);\n            \n            // Handle different response types\n            let blob;\n            if (response.data instanceof Blob) {\n                blob = response.data;\n            } else {\n                blob = new Blob([response.data]);\n            }\n            \n            // Create blob URL and trigger download\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = file.fileName || file.name || 'download';\n            link.style.display = 'none';\n            document.body.appendChild(link);\n            link.click();\n            \n            // Clean up\n            setTimeout(() => {\n                document.body.removeChild(link);\n                window.URL.revokeObjectURL(url);\n            }, 100);\n            \n            // Log activity\n            await logActivity('DOWNLOAD', { \n                fileName: file.fileName || file.name,\n                fileId: file.id \n            });\n            \n        } catch (error) {\n            console.error('Failed to download file:', error);\n            alert('Failed to download file: ' + (error.response?.data?.error || error.message));\n        }\n    };\n\n    // File Click Handler\n    const handleFileClick = (file) => {\n        if (file.isPasswordProtected) {\n            setPendingFile(file);\n            setShowPasswordVerifyModal(true);\n        } else {\n            setModalFile(file);\n            setIsModalOpen(true);\n            \n            // Set up global handlers for security modals\n            window.onShowPasswordModal = (file) => {\n                setModalFile(file);\n                setShowEnhancedPasswordModal(true);\n                setIsModalOpen(false);\n            };\n            \n            window.onShowShareModal = (file) => {\n                setModalFile(file);\n                setShowShareModal(true);\n                setIsModalOpen(false);\n            };\n        }\n    };\n\n    // Password Protection Handlers\n    const handleSetPassword = async (fileId, password) => {\n        try {\n            console.log('Setting password for file:', fileId, 'Backend connected:', backendConnected);\n            \n            if (backendConnected) {\n                console.log('Calling backend API to set password...');\n                const response = await documentAPI.setPassword(fileId, password);\n                console.log('Backend response:', response);\n                \n                // Reload files to get updated data from backend\n                console.log('Reloading files from backend...');\n                await loadFiles();\n            } else {\n                console.log('Using offline mode for password protection...');\n                // Fallback for offline mode\n                const protectedFiles = JSON.parse(localStorage.getItem('protectedFiles') || '{}');\n                protectedFiles[fileId] = { isPasswordProtected: true, passwordHash: btoa(password) };\n                localStorage.setItem('protectedFiles', JSON.stringify(protectedFiles));\n                console.log('Saved to localStorage:', protectedFiles);\n                \n                // Update local state\n                setFiles(prev => prev.map(f => \n                    f.id === fileId ? { ...f, isPasswordProtected: true } : f\n                ));\n            }\n            \n            await logActivity('SET_PASSWORD', { \n                fileId,\n                fileName: files.find(f => f.id === fileId)?.name\n            });\n            \n            alert('Password protection enabled!');\n        } catch (error) {\n            console.error('Failed to set password:', error);\n            console.error('Error details:', error.response?.data || error.message);\n            alert('Failed to set password: ' + (error.response?.data?.error || error.message));\n        }\n    };\n\n    const handleRemovePassword = async (fileId) => {\n        try {\n            if (backendConnected) {\n                await documentAPI.removePassword(fileId);\n                // Reload files to get updated data from backend\n                await loadFiles();\n            } else {\n                // Fallback for offline mode\n                const protectedFiles = JSON.parse(localStorage.getItem('protectedFiles') || '{}');\n                delete protectedFiles[fileId];\n                localStorage.setItem('protectedFiles', JSON.stringify(protectedFiles));\n                \n                setFiles(prev => prev.map(f => \n                    f.id === fileId ? { ...f, isPasswordProtected: false } : f\n                ));\n            }\n            \n            await logActivity('REMOVE_PASSWORD', { \n                fileId,\n                fileName: files.find(f => f.id === fileId)?.name\n            });\n            \n            alert('Password protection removed!');\n        } catch (error) {\n            console.error('Failed to remove password:', error);\n            alert('Failed to remove password');\n        }\n    };\n\n    const handleVerifyPassword = async (fileId, password) => {\n        try {\n            const file = files.find(f => f.id === fileId);\n            \n            if (backendConnected) {\n                await documentAPI.verifyPassword(fileId, password);\n            } else {\n                // Fallback to localStorage verification\n                const protectedFiles = JSON.parse(localStorage.getItem('protectedFiles') || '{}');\n                const protection = protectedFiles[fileId];\n                if (!protection || protection.passwordHash !== btoa(password)) {\n                    throw new Error('Invalid password');\n                }\n            }\n            \n            await logActivity('PASSWORD_VERIFIED', { \n                fileId,\n                fileName: file.name\n            });\n            \n            // Open file directly after password verification\n            setModalFile(file);\n            setIsModalOpen(true);\n            setShowPasswordVerifyModal(false);\n            setPendingFile(null);\n            \n            // Set up global handlers for security modals\n            window.onShowPasswordModal = (file) => {\n                setModalFile(file);\n                setShowEnhancedPasswordModal(true);\n                setIsModalOpen(false);\n            };\n            \n            window.onShowShareModal = (file) => {\n                setModalFile(file);\n                setShowShareModal(true);\n                setIsModalOpen(false);\n            };\n            \n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const handleVerifyOTP = async (otp) => {\n        try {\n            await otpAPI.verifyOTP(otp);\n            \n            if (pendingOTPFile) {\n                // Handle file OTP verification\n                await logActivity('OTP_VERIFIED', { \n                    fileId: pendingOTPFile.id,\n                    fileName: pendingOTPFile.name\n                });\n                \n                // Open file after successful OTP verification\n                setModalFile(pendingOTPFile);\n                setIsModalOpen(true);\n                setShowOTPModal(false);\n                setPendingOTPFile(null);\n                \n                // Set up global handlers for security modals\n                window.onShowPasswordModal = (file) => {\n                    setModalFile(file);\n                    setShowEnhancedPasswordModal(true);\n                    setIsModalOpen(false);\n                };\n                \n                window.onShowShareModal = (file) => {\n                    setModalFile(file);\n                    setShowShareModal(true);\n                    setIsModalOpen(false);\n                };\n            } else if (pendingFolder) {\n                // Handle folder OTP verification\n                await logActivity('FOLDER_OTP_VERIFIED', { \n                    folderId: pendingFolder.id,\n                    folderName: pendingFolder.name\n                });\n                \n                // Open folder after successful OTP verification\n                setCurrentFolder(pendingFolder);\n                setBreadcrumb(prev => [...prev, pendingFolder]);\n                setShowOTPModal(false);\n                setPendingFolder(null);\n                \n                await logActivity('OPEN_FOLDER', { \n                    folderName: pendingFolder.name,\n                    folderId: pendingFolder.id \n                });\n            }\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const handleShareFile = async (fileId, email, permission) => {\n        try {\n            // In real app, this would call backend API\n            const shareData = {\n                fileId,\n                email,\n                permission,\n                sharedAt: new Date().toISOString()\n            };\n            \n            // Store share info in localStorage for demo\n            const existingShares = JSON.parse(localStorage.getItem('fileShares') || '[]');\n            existingShares.push(shareData);\n            localStorage.setItem('fileShares', JSON.stringify(existingShares));\n            \n            await logActivity('SHARE_FILE', { \n                fileId,\n                fileName: files.find(f => f.id === fileId)?.name,\n                sharedWith: email,\n                permission\n            });\n            \n            alert(`File shared with ${email} (${permission} access)`);\n        } catch (error) {\n            console.error('Failed to share file:', error);\n            alert('Failed to share file');\n        }\n    };\n\n    // File Rename Handler\n    const handleRenameFile = async (fileId, newName) => {\n        try {\n            const oldName = modalFile?.fileName || modalFile?.name;\n            \n            // Update local state immediately\n            setFiles(prev => prev.map(f => \n                f.id === fileId ? { ...f, name: newName, fileName: newName } : f\n            ));\n            \n            // Update modal file immediately\n            if (modalFile && modalFile.id === fileId) {\n                setModalFile(prev => ({ ...prev, name: newName, fileName: newName }));\n            }\n            \n            // Log activity\n            await logActivity('RENAME', { \n                fileId,\n                oldName,\n                newName,\n                fileName: newName\n            });\n            \n            if (backendConnected) {\n                // Call backend API to rename file\n                await documentAPI.renameDocument(fileId, newName);\n                console.log('File renamed on backend');\n            }\n            \n        } catch (error) {\n            console.error('Failed to rename file:', error);\n            // Revert local changes on error\n            setFiles(prev => prev.map(f => \n                f.id === fileId ? { ...f, name: modalFile?.name, fileName: modalFile?.fileName } : f\n            ));\n            alert('Failed to rename file: ' + (error.response?.data?.error || error.message));\n            throw error;\n        }\n    };\n\n    // Folder Delete Handler\n    const handleFolderDelete = async (folder) => {\n        if (window.confirm(`Delete folder \"${folder.name}\"? This will also delete all files inside it.`)) {\n            try {\n                if (backendConnected) {\n                    await folderAPI.deleteFolder(folder.id);\n                }\n                \n                // Remove folder from local state\n                setFolders(prev => prev.filter(f => f.id !== folder.id));\n                \n                // Log activity\n                await logActivity('DELETE_FOLDER', { \n                    folderName: folder.name,\n                    folderId: folder.id \n                });\n                \n                alert('Folder deleted successfully!');\n            } catch (error) {\n                console.error('Failed to delete folder:', error);\n                alert('Failed to delete folder: ' + (error.response?.data?.error || error.message));\n            }\n        }\n    };\n\n    // Folder Selection Handler\n    const handleSelectFolder = (folderId) => {\n        setSelectedFolders(prev => \n            prev.includes(folderId) \n                ? prev.filter(id => id !== folderId)\n                : [...prev, folderId]\n        );\n    };\n\n    // Bulk Folder Delete Handler\n    const handleBulkFolderDelete = async () => {\n        if (selectedFolders.length === 0) return;\n        \n        if (window.confirm(`Delete ${selectedFolders.length} selected folders? This will also delete all files inside them.`)) {\n            for (const folderId of selectedFolders) {\n                const folder = folders.find(f => f.id === folderId);\n                if (folder) {\n                    await handleFolderDelete(folder);\n                }\n            }\n            setSelectedFolders([]);\n        }\n    };\n\n    // File View Handler\n    const handleViewFile = async (file) => {\n        try {\n            // Log view activity\n            await logActivity('VIEW', { \n                fileName: file.fileName || file.name,\n                fileId: file.id \n            });\n            \n            // Always use the file viewer modal for proper authentication\n            setViewerFile(file);\n            setIsFileViewerOpen(true);\n        } catch (error) {\n            console.error('Failed to view file:', error);\n            alert('Failed to view file: ' + (error.response?.data?.error || error.message));\n        }\n    };\n\n    // Folder Password Protection Handlers\n    const handleSetFolderPassword = async (folderId, password) => {\n        try {\n            if (backendConnected) {\n                await folderAPI.setPassword(folderId, password);\n                // Reload folders to get updated data from backend\n                await loadFolders();\n            } else {\n                // Fallback for offline mode\n                const protectedFolders = JSON.parse(localStorage.getItem('protectedFolders') || '{}');\n                protectedFolders[folderId] = { isPasswordProtected: true, passwordHash: btoa(password) };\n                localStorage.setItem('protectedFolders', JSON.stringify(protectedFolders));\n                \n                // Update local state\n                setFolders(prev => prev.map(f => \n                    f.id === folderId ? { ...f, isPasswordProtected: true } : f\n                ));\n            }\n            \n            await logActivity('SET_FOLDER_PASSWORD', { \n                folderId,\n                folderName: folders.find(f => f.id === folderId)?.name\n            });\n            \n            alert('Folder password protection enabled!');\n        } catch (error) {\n            console.error('Failed to set folder password:', error);\n            alert('Failed to set folder password');\n        }\n    };\n\n    const handleRemoveFolderPassword = async (folderId) => {\n        try {\n            if (backendConnected) {\n                await folderAPI.removePassword(folderId);\n                // Reload folders to get updated data from backend\n                await loadFolders();\n            } else {\n                // Fallback for offline mode\n                const protectedFolders = JSON.parse(localStorage.getItem('protectedFolders') || '{}');\n                delete protectedFolders[folderId];\n                localStorage.setItem('protectedFolders', JSON.stringify(protectedFolders));\n                \n                setFolders(prev => prev.map(f => \n                    f.id === folderId ? { ...f, isPasswordProtected: false } : f\n                ));\n            }\n            \n            await logActivity('REMOVE_FOLDER_PASSWORD', { \n                folderId,\n                folderName: folders.find(f => f.id === folderId)?.name\n            });\n            \n            alert('Folder password protection removed!');\n        } catch (error) {\n            console.error('Failed to remove folder password:', error);\n            alert('Failed to remove folder password');\n        }\n    };\n\n    const handleVerifyFolderPassword = async (folderId, password) => {\n        try {\n            const folder = folders.find(f => f.id === folderId);\n            \n            if (backendConnected) {\n                await folderAPI.verifyPassword(folderId, password);\n            } else {\n                // Fallback to localStorage verification\n                const protectedFolders = JSON.parse(localStorage.getItem('protectedFolders') || '{}');\n                const protection = protectedFolders[folderId];\n                if (!protection || protection.passwordHash !== btoa(password)) {\n                    throw new Error('Invalid password');\n                }\n            }\n            \n            await logActivity('FOLDER_PASSWORD_VERIFIED', { \n                folderId,\n                folderName: folder.name\n            });\n            \n            // Open folder immediately after successful verification\n            setCurrentFolder(folder);\n            setBreadcrumb(prev => [...prev, folder]);\n            setShowFolderPasswordVerifyModal(false);\n            setPendingFolder(null);\n            \n            await logActivity('OPEN_FOLDER', { \n                folderName: folder.name,\n                folderId: folder.id \n            });\n        } catch (error) {\n            throw error;\n        }\n    };\n\n\n\n\n\n    const renderContent = () => {\n        switch(activeView) {\n            case 'My Files':\n                return (\n                    <DropboxMyFilesView \n                        files={files}\n                        folders={folders}\n                        currentFolder={currentFolder}\n                        breadcrumb={breadcrumb}\n                        searchTerm={searchTerm}\n                        setSearchTerm={setSearchTerm}\n                        filterType={filterType}\n                        setFilterType={setFilterType}\n                        sortBy={sortBy}\n                        setSortBy={setSortBy}\n                        sortOrder={sortOrder}\n                        setSortOrder={setSortOrder}\n                        selectedFiles={selectedFiles}\n                        handleSelectFile={handleSelectFile}\n                        handleSelectAll={handleSelectAll}\n                        handleBulkDelete={handleBulkDelete}\n                        handleFolderClick={handleFolderClick}\n                        handleBreadcrumbClick={handleBreadcrumbClick}\n                        handleFileClick={handleFileClick}\n                        setIsNewFolderModalOpen={setIsNewFolderModalOpen}\n                        fileInputRef={fileInputRef}\n                        handleFileUpload={handleFileUpload}\n                        isUploading={isUploading}\n                        dragActive={dragActive}\n                        handleDrag={handleDrag}\n                        handleDrop={handleDrop}\n                        fileFilter={fileFilter}\n                        handleFolderDelete={handleFolderDelete}\n                        selectedFolders={selectedFolders}\n                        handleSelectFolder={handleSelectFolder}\n                        handleBulkFolderDelete={handleBulkFolderDelete}\n                    />\n                );\n            case 'History':\n                return <DropboxHistoryView files={files} />;\n            case 'Activity Logs':\n                return <DropboxActivityLogView activityLogs={activityLogs} />;\n            default:\n                return (\n                    <DropboxMyFilesView \n                        files={files}\n                        folders={folders}\n                        currentFolder={currentFolder}\n                        breadcrumb={breadcrumb}\n                        searchTerm={searchTerm}\n                        setSearchTerm={setSearchTerm}\n                        filterType={filterType}\n                        setFilterType={setFilterType}\n                        sortBy={sortBy}\n                        setSortBy={setSortBy}\n                        sortOrder={sortOrder}\n                        setSortOrder={setSortOrder}\n                        selectedFiles={selectedFiles}\n                        handleSelectFile={handleSelectFile}\n                        handleSelectAll={handleSelectAll}\n                        handleBulkDelete={handleBulkDelete}\n                        handleFolderClick={handleFolderClick}\n                        handleBreadcrumbClick={handleBreadcrumbClick}\n                        handleFileClick={handleFileClick}\n                        setIsNewFolderModalOpen={setIsNewFolderModalOpen}\n                        fileInputRef={fileInputRef}\n                        handleFileUpload={handleFileUpload}\n                        isUploading={isUploading}\n                        dragActive={dragActive}\n                        handleDrag={handleDrag}\n                        handleDrop={handleDrop}\n                        fileFilter={fileFilter}\n                    />\n                );\n        }\n    };\n\n    return (\n        <div className=\"flex w-screen font-sans antialiased\" style={{backgroundColor: COLORS.offWhite, margin: 0, padding: 0, position: 'fixed', top: '64px', left: 0, right: 0, bottom: 0, height: 'calc(100vh - 64px)'}}>\n            <Sidebar activeView={activeView} setActiveView={setActiveView} fileFilter={fileFilter} setFileFilter={setFileFilter} />\n            <main className=\"flex-1 flex flex-col overflow-hidden\" style={{margin: 0, padding: 0}}>\n                <Header title={activeView} backendConnected={backendConnected} />\n                <div className=\"flex-1 overflow-hidden\" style={{margin: 0, padding: 0}}>\n                    {renderContent()}\n                </div>\n            </main>\n            \n            <FileDetailModal\n                file={modalFile}\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                onDeleteFile={handleDeleteFile}\n                onDownloadFile={handleDownloadFile}\n                onRenameFile={handleRenameFile}\n                onViewFile={handleViewFile}\n            />\n            \n            <NewFolderModal\n                isOpen={isNewFolderModalOpen}\n                onClose={() => setIsNewFolderModalOpen(false)}\n                onCreateFolder={handleCreateFolder}\n            />\n            \n            <FileViewer\n                file={viewerFile}\n                isOpen={isFileViewerOpen}\n                onClose={() => {\n                    setIsFileViewerOpen(false);\n                    setViewerFile(null);\n                }}\n            />\n            \n            <PasswordProtectionModal\n                isOpen={showPasswordModal}\n                onClose={() => setShowPasswordModal(false)}\n                file={modalFile}\n                onSetPassword={handleSetPassword}\n                onRemovePassword={handleRemovePassword}\n            />\n            \n            <EnhancedPasswordProtectionModal\n                isOpen={showEnhancedPasswordModal}\n                onClose={() => setShowEnhancedPasswordModal(false)}\n                file={modalFile}\n                onSetPassword={handleSetPassword}\n                onRemovePassword={handleRemovePassword}\n            />\n            \n            <OTPVerificationModal\n                isOpen={showOTPModal}\n                onClose={() => {\n                    setShowOTPModal(false);\n                    setPendingOTPFile(null);\n                    setPendingFolder(null);\n                }}\n                file={pendingOTPFile}\n                folder={pendingFolder}\n                onVerify={handleVerifyOTP}\n            />\n            \n            <PasswordVerificationModal\n                isOpen={showPasswordVerifyModal}\n                onClose={() => {\n                    setShowPasswordVerifyModal(false);\n                    setPendingFile(null);\n                }}\n                file={pendingFile}\n                onVerify={handleVerifyPassword}\n            />\n            \n            <SharePermissionsModal\n                isOpen={showShareModal}\n                onClose={() => setShowShareModal(false)}\n                file={modalFile}\n                onShare={handleShareFile}\n            />\n            \n            <FolderPasswordProtectionModal\n                isOpen={showFolderPasswordModal}\n                onClose={() => setShowFolderPasswordModal(false)}\n                folder={modalFolder}\n                onSetPassword={handleSetFolderPassword}\n                onRemovePassword={handleRemoveFolderPassword}\n            />\n            \n            <FolderPasswordVerificationModal\n                isOpen={showFolderPasswordVerifyModal}\n                onClose={() => {\n                    setShowFolderPasswordVerifyModal(false);\n                    setPendingFolder(null);\n                }}\n                folder={pendingFolder}\n                onVerify={handleVerifyFolderPassword}\n            />\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}