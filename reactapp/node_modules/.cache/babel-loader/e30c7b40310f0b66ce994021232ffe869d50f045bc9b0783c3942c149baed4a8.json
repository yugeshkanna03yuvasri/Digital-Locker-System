{"ast":null,"code":"import axios from'axios';const API_BASE_URL='http://localhost:8081/api';// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('accessToken');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>Promise.reject(error));// Response interceptor to handle token refresh\napi.interceptors.response.use(response=>response,async error=>{var _error$response;const originalRequest=error.config;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401&&!originalRequest._retry){originalRequest._retry=true;const refreshToken=localStorage.getItem('refreshToken');if(refreshToken){try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/auth/refresh\"),{refreshToken:refreshToken});const{accessToken,refreshToken:newRefreshToken}=response.data;localStorage.setItem('accessToken',accessToken);localStorage.setItem('refreshToken',newRefreshToken);originalRequest.headers.Authorization=\"Bearer \".concat(accessToken);return api(originalRequest);}catch(refreshError){localStorage.removeItem('accessToken');localStorage.removeItem('refreshToken');window.location.href='/login';}}}return Promise.reject(error);});// Auth API\nexport const authAPI={login:(email,password)=>api.post('/auth/login',{email,password}),logout:function(refreshToken){let revokeAll=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return api.post('/auth/logout',{refreshToken,revokeAll});},getMe:()=>api.get('/auth/me'),signup:function(name,email,password){let role=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'USER';return api.post('/users/signup',{name,email,password,role});}};// User API\nexport const userAPI={getAllUsers:()=>api.get('/users'),getUserById:id=>api.get(\"/users/\".concat(id)),updateUser:(id,userData)=>api.put(\"/users/\".concat(id),userData),deleteUser:id=>api.delete(\"/users/\".concat(id))};// Document API\nexport const documentAPI={getAllDocuments:()=>api.get('/documents'),getDocumentById:id=>api.get(\"/documents/\".concat(id)),uploadDocument:formData=>api.post('/documents/upload',formData,{headers:{'Content-Type':'multipart/form-data'}}),downloadDocument:id=>api.get(\"/documents/\".concat(id,\"/download\"),{responseType:'blob'}),deleteDocument:id=>api.delete(\"/documents/\".concat(id)),updateDocument:(id,documentData)=>api.put(\"/documents/\".concat(id),documentData),renameDocument:(id,newName)=>api.put(\"/documents/\".concat(id,\"/rename\"),{name:newName})};// Folder API\nexport const folderAPI={getAllFolders:()=>api.get('/folders'),getFolderById:id=>api.get(\"/folders/\".concat(id)),createFolder:folderData=>api.post('/folders',folderData),updateFolder:(id,folderData)=>api.put(\"/folders/\".concat(id),folderData),deleteFolder:id=>api.delete(\"/folders/\".concat(id))};// Activity Log API\nexport const activityAPI={getAllLogs:()=>api.get('/activity'),recordActivity:(action,details)=>api.post('/activity/record',{action,details})};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","post","accessToken","newRefreshToken","data","setItem","refreshError","removeItem","window","location","href","authAPI","login","email","password","logout","revokeAll","arguments","length","undefined","getMe","get","signup","name","role","userAPI","getAllUsers","getUserById","id","updateUser","userData","put","deleteUser","delete","documentAPI","getAllDocuments","getDocumentById","uploadDocument","formData","downloadDocument","responseType","deleteDocument","updateDocument","documentData","renameDocument","newName","folderAPI","getAllFolders","getFolderById","createFolder","folderData","updateFolder","deleteFolder","activityAPI","getAllLogs","recordActivity","action","details"],"sources":["c:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8081/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor to handle token refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n    \n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      \n      const refreshToken = localStorage.getItem('refreshToken');\n      if (refreshToken) {\n        try {\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {\n            refreshToken: refreshToken\n          });\n          \n          const { accessToken, refreshToken: newRefreshToken } = response.data;\n          localStorage.setItem('accessToken', accessToken);\n          localStorage.setItem('refreshToken', newRefreshToken);\n          \n          originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n          return api(originalRequest);\n        } catch (refreshError) {\n          localStorage.removeItem('accessToken');\n          localStorage.removeItem('refreshToken');\n          window.location.href = '/login';\n        }\n      }\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// Auth API\nexport const authAPI = {\n  login: (email, password) => \n    api.post('/auth/login', { email, password }),\n  \n  logout: (refreshToken, revokeAll = false) => \n    api.post('/auth/logout', { refreshToken, revokeAll }),\n  \n  getMe: () => \n    api.get('/auth/me'),\n  \n  signup: (name, email, password, role = 'USER') => \n    api.post('/users/signup', { name, email, password, role })\n};\n\n// User API\nexport const userAPI = {\n  getAllUsers: () => api.get('/users'),\n  getUserById: (id) => api.get(`/users/${id}`),\n  updateUser: (id, userData) => api.put(`/users/${id}`, userData),\n  deleteUser: (id) => api.delete(`/users/${id}`)\n};\n\n// Document API\nexport const documentAPI = {\n  getAllDocuments: () => api.get('/documents'),\n  getDocumentById: (id) => api.get(`/documents/${id}`),\n  uploadDocument: (formData) => api.post('/documents/upload', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' }\n  }),\n  downloadDocument: (id) => api.get(`/documents/${id}/download`, {\n    responseType: 'blob'\n  }),\n  deleteDocument: (id) => api.delete(`/documents/${id}`),\n  updateDocument: (id, documentData) => api.put(`/documents/${id}`, documentData),\n  renameDocument: (id, newName) => api.put(`/documents/${id}/rename`, { name: newName })\n};\n\n// Folder API\nexport const folderAPI = {\n  getAllFolders: () => api.get('/folders'),\n  getFolderById: (id) => api.get(`/folders/${id}`),\n  createFolder: (folderData) => api.post('/folders', folderData),\n  updateFolder: (id, folderData) => api.put(`/folders/${id}`, folderData),\n  deleteFolder: (id) => api.delete(`/folders/${id}`)\n};\n\n// Activity Log API\nexport const activityAPI = {\n  getAllLogs: () => api.get('/activity'),\n  recordActivity: (action, details) => api.post('/activity/record', { action, details })\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}