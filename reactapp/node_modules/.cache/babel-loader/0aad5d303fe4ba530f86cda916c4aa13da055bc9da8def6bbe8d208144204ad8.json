{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yuvasri\\\\OneDrive\\\\Desktop\\\\Digital lock product\\\\reactapp\\\\src\\\\components\\\\UserFileDashboard.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\n\n// --- Firebase Imports ---\n// NOTE: These are imported globally in the execution environment.\n// For demonstration, we assume these are available.\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, query, onSnapshot, addDoc, serverTimestamp, doc, deleteDoc, orderBy, limit } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { firebaseConfig, appId, initialAuthToken } from '../firebase.config';\n// --- Custom Theme Colors ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = {\n  sage: '#96A78D',\n  // Darker base green/grey (Sidebar, Buttons)\n  mint: '#B6CEB4',\n  // Medium primary green (Active State, Accents)\n  lightSage: '#D9E9CF',\n  // Lightest background/hover green\n  offWhite: '#F0F0F0',\n  // Near white background\n\n  // Derived colors for contrast and subtle effects\n  darkSage: '#7E8F76',\n  textColor: '#374151',\n  mintText: '#547A50'\n};\n\n// --- Firebase Initialization Variables ---\n// IMPORTANT: These global variables are provided by the canvas environment.\n// const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\n// const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\n// const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n//import { firebaseConfig, appId, initialAuthToken } from '../firebase.config';\n\n// --- Utility Functions ---\n\n// Converts bytes to a human-readable size string\nconst formatFileSize = bytes => {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\n// Extracts file extension and determines a general type for icon display\nconst getFileType = filename => {\n  const ext = filename.split('.').pop().toLowerCase();\n  switch (ext) {\n    case 'pdf':\n      return 'PDF';\n    case 'doc':\n    case 'docx':\n      return 'Document';\n    case 'xls':\n    case 'xlsx':\n      return 'Spreadsheet';\n    case 'jpg':\n    case 'jpeg':\n    case 'png':\n    case 'gif':\n      return 'Image';\n    case 'mp4':\n    case 'mov':\n      return 'Video';\n    case 'txt':\n      return 'Text';\n    case 'zip':\n    case 'rar':\n      return 'Archive';\n    default:\n      return 'Other';\n  }\n};\n\n// --- SVG Icon Components (Phosphor/Lucide Icons) ---\nconst FileTextIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L15 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 254\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"14 2 14 8 20 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 337\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"13\",\n    x2: \"8\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 382\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"17\",\n    x2: \"8\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 426\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"10\",\n    y1: \"9\",\n    x2: \"8\",\n    y2: \"9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 470\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 66,\n  columnNumber: 54\n}, this);\n_c = FileTextIcon;\nconst UploadIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 252\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"17 8 12 3 7 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 311\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"3\",\n    x2: \"12\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 355\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 67,\n  columnNumber: 52\n}, this);\n_c2 = UploadIcon;\nconst FolderIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 252\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 68,\n  columnNumber: 52\n}, this);\n_c3 = FolderIcon;\nconst HistoryIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 2v5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 253\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 17v5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 278\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17.8 19.2 16 17.4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 304\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4.2 4.8 6 6.6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 340\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19.2 17.8 17.4 16\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 372\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M6.6 6l-1.8 1.8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 408\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19.9 12H17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 441\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 12H4.1\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 470\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 497\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 69,\n  columnNumber: 53\n}, this);\n_c4 = HistoryIcon;\nconst ZapIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n    points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 249\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 70,\n  columnNumber: 49\n}, this);\n_c5 = ZapIcon;\nconst DownloadIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 254\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"7 10 12 15 17 10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 313\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"15\",\n    x2: \"12\",\n    y2: \"3\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 360\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 71,\n  columnNumber: 54\n}, this);\n_c6 = DownloadIcon;\nconst XIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M18 6 6 18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 247\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m6 6 12 12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 275\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 72,\n  columnNumber: 47\n}, this);\n_c7 = XIcon;\nconst TrashIcon = ({\n  className = \"h-5 w-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M3 6h18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 251\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 276\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 331\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 73,\n  columnNumber: 51\n}, this);\n\n// --- Firebase Context and Utility ---\n_c8 = TrashIcon;\nconst FirebaseContext = /*#__PURE__*/React.createContext(null);\nconst FirebaseProvider = ({\n  children\n}) => {\n  _s();\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [storage, setStorage] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  useEffect(() => {\n    let unsubscribe = () => {};\n    const initFirebase = async () => {\n      try {\n        const app = initializeApp(firebaseConfig);\n        const authInstance = getAuth(app);\n        const dbInstance = getFirestore(app);\n        const storageInstance = getStorage(app);\n        setDb(dbInstance);\n        setAuth(authInstance);\n        setStorage(storageInstance);\n\n        // 1. Attempt to sign in (Custom Token or Anonymous)\n        try {\n          if (initialAuthToken) {\n            await signInWithCustomToken(authInstance, initialAuthToken);\n          } else {\n            await signInAnonymously(authInstance);\n          }\n        } catch (error) {\n          console.error(\"Initial Firebase Auth failed, attempting anonymous fallback:\", error);\n          // 2. If custom token fails, ensure we sign in anonymously as a fallback\n          try {\n            await signInAnonymously(authInstance);\n          } catch (anonError) {\n            console.error(\"Anonymous sign-in failed too. Dashboard will not load.\", anonError);\n            // If all auth fails, stop here and display loading state indefinitely or an error\n            setIsAuthReady(true);\n            return;\n          }\n        }\n\n        // 3. Set up the auth state change listener to finalize user ID and readiness\n        // This will fire immediately after the awaited sign-in above completes.\n        unsubscribe = onAuthStateChanged(authInstance, user => {\n          if (user && user.uid) {\n            // CRITICAL: Only use UID if user object is present\n            setUserId(user.uid);\n            console.log(\"Authentication successful. User ID:\", user.uid);\n          } else {\n            // If authentication fails, user will be null. Do not set a random ID.\n            console.error(\"Authentication failed: No user found after sign-in attempts.\");\n            setUserId(null);\n          }\n          setIsAuthReady(true);\n        });\n      } catch (e) {\n        console.error(\"Firebase Initialization Failed:\", e);\n        setIsAuthReady(true);\n      }\n    };\n    initFirebase();\n\n    // Cleanup function for the effect\n    return () => unsubscribe();\n  }, []);\n\n  // Memoize the context value to prevent unnecessary re-renders\n  const contextValue = useMemo(() => ({\n    db,\n    auth,\n    storage,\n    userId,\n    isAuthReady\n  }), [db, auth, storage, userId, isAuthReady]);\n  if (!isAuthReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex items-center justify-center h-screen bg-[${COLORS.offWhite}] text-[${COLORS.textColor}]`,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Connecting to secure file storage...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(FirebaseContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n\n// Custom hook to use Firebase context\n_s(FirebaseProvider, \"5xZd4zq5RJwFYoPAmLviC7SSW4o=\");\n_c9 = FirebaseProvider;\nconst useFirebase = () => {\n  _s2();\n  return React.useContext(FirebaseContext);\n};\n\n// --- Activity Logging Utility ---\n_s2(useFirebase, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst useActivityLogger = () => {\n  _s3();\n  const {\n    db,\n    userId\n  } = useFirebase();\n  const logActivity = (action, details = {}) => {\n    if (!db || !userId) return;\n    const log = {\n      userId: userId,\n      action: action,\n      // e.g., \"UPLOAD\", \"DELETE\", \"DOWNLOAD\"\n      details: details,\n      timestamp: serverTimestamp()\n    };\n    const logCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/activity_logs`);\n\n    // Use setTimeout with a tiny delay to prevent blocking the main thread\n    // during high-frequency operations, though for this app it's mostly for async safety.\n    setTimeout(() => {\n      addDoc(logCollectionRef, log).catch(e => console.error(\"Error writing activity log:\", e));\n    }, 0);\n  };\n  return logActivity;\n};\n\n// --- Modals and Preview Components ---\n_s3(useActivityLogger, \"lFB9M5gP8tW3jn3foeDZFrywwu8=\", false, function () {\n  return [useFirebase];\n});\nconst Modal = ({\n  title,\n  children,\n  onClose,\n  isOpen\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-white rounded-xl shadow-2xl max-w-lg w-full transform transition-all overflow-hidden`,\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 flex justify-between items-center border-b bg-[${COLORS.lightSage}]`,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-xl font-semibold text-[${COLORS.textColor}]`,\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-600 hover:text-red-500 p-2 rounded-full transition\",\n          children: /*#__PURE__*/_jsxDEV(XIcon, {\n            className: \"h-6 w-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 max-h-[80vh] overflow-y-auto\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n};\n_c0 = Modal;\nconst FileDetailModal = ({\n  file,\n  isOpen,\n  onClose,\n  handleDeleteFile\n}) => {\n  _s4();\n  const logActivity = useActivityLogger();\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  useEffect(() => {\n    setPreviewUrl(null);\n    if (file !== null && file !== void 0 && file.downloadUrl) {\n      const fileType = getFileType(file.fileName);\n      // Simple preview mechanism for images/text\n      if (fileType === 'Image' || fileType === 'Text') {\n        // For security and simplicity in a demo environment, we just use the download URL\n        // Note: In a production app, you might use a safer preview service/method\n        setPreviewUrl(file.downloadUrl);\n      }\n    }\n  }, [file]);\n  if (!file) return null;\n  const handleDownload = () => {\n    // Log download activity\n    logActivity('DOWNLOAD', {\n      fileId: file.id,\n      fileName: file.fileName\n    });\n    // Trigger native browser download\n    window.open(file.downloadUrl, '_blank');\n  };\n  const confirmDelete = async () => {\n    if (!isDeleting) {\n      setIsDeleting(true);\n      try {\n        await handleDeleteFile(file);\n        onClose();\n      } catch (error) {\n        console.error(\"Failed to delete file:\", error);\n        // Optionally show error message\n      } finally {\n        setIsDeleting(false);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: `File Details: ${file.fileName}`,\n    isOpen: isOpen,\n    onClose: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm\",\n          children: \"File Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: file.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm\",\n          children: \"File Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: file.fileType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm\",\n          children: \"File Size\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: formatFileSize(file.fileSize)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm\",\n          children: \"Upload Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: new Date(file.uploadDate.seconds * 1000).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), previewUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 border border-gray-200 rounded-lg p-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: `font-semibold text-[${COLORS.textColor}] mb-3`,\n          children: \"File Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }, this), getFileType(file.fileName) === 'Image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewUrl,\n          alt: \"File Preview\",\n          className: \"max-w-full max-h-60 mx-auto rounded-lg shadow-md object-contain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 italic\",\n          children: \"No visual preview available for this file type. Click download to view.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end gap-3 pt-4 border-t mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: confirmDelete,\n          disabled: isDeleting,\n          className: `flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-red-500 hover:bg-red-600 shadow-md disabled:opacity-50`,\n          children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n            className: \"h-5 w-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this), isDeleting ? 'Deleting...' : 'Delete File']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownload,\n          className: `flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-[${COLORS.sage}] hover:bg-[${COLORS.darkSage}] shadow-md`,\n          children: [/*#__PURE__*/_jsxDEV(DownloadIcon, {\n            className: \"h-5 w-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 25\n          }, this), \"Download\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n};\n\n// --- View Components ---\n_s4(FileDetailModal, \"a6fSUUNd9AHH6osjaO/w1Ak0XmI=\", false, function () {\n  return [useActivityLogger];\n});\n_c1 = FileDetailModal;\nconst Sidebar = ({\n  activeView,\n  setActiveView\n}) => {\n  _s5();\n  const {\n    userId\n  } = useFirebase();\n  const navItems = [{\n    name: 'My Files',\n    icon: FileTextIcon\n  }, {\n    name: 'History',\n    icon: HistoryIcon\n  }, {\n    name: 'Activity Logs',\n    icon: ZapIcon\n  }];\n  return /*#__PURE__*/_jsxDEV(\"aside\", {\n    className: `w-64 flex-shrink-0 bg-[${COLORS.sage}] text-gray-800 flex flex-col p-4 shadow-xl`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white text-2xl font-bold mb-6 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"28\",\n        height: \"28\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 2a10 10 0 0 0-9.25 15.68l.06.07a8.5 8.5 0 0 1-.22 1.63L2 22l3.78-.95a9 9 0 0 0 1.63-.22l.07.06A10 10 0 1 0 12 2Z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 195\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"User Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white text-xs mb-8 p-2 rounded-lg bg-[${COLORS.darkSage}] break-all\",\n      children: [\"User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-mono text-xs\",\n        children: userId || 'Awaiting Auth...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"flex-grow\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: navItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            onClick: e => {\n              e.preventDefault();\n              setActiveView(item.name);\n            },\n            className: `flex items-center gap-3 px-4 py-3 my-1 rounded-lg transition-colors duration-200 ${activeView === item.name ? `bg-[${COLORS.mint}] text-[${COLORS.mintText}] shadow-md font-semibold` : `hover:bg-[${COLORS.darkSage}] hover:text-white text-white`}`,\n            children: [/*#__PURE__*/_jsxDEV(item.icon, {\n              className: `h-5 w-5 ${activeView === item.name ? `text-[${COLORS.mintText}]` : `text-white`}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 29\n          }, this)\n        }, item.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 9\n  }, this);\n};\n_s5(Sidebar, \"W6CZvoa/TVRHo2LShOgk2Br90ac=\", false, function () {\n  return [useFirebase];\n});\n_c10 = Sidebar;\nconst Header = ({\n  title\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"bg-white sticky top-0 z-10 shadow-sm p-4 flex justify-between items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: `text-2xl font-semibold text-[${COLORS.textColor}]`,\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-4\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `https://i.pravatar.cc/150?u=user-${Math.random()}`,\n        onError: e => {\n          e.target.onerror = null;\n          e.target.src = \"https://placehold.co/150x150/F0F0F0/96A78D?text=US\";\n        },\n        alt: \"User Avatar\",\n        className: `h-10 w-10 rounded-full object-cover ring-2 ring-[${COLORS.mint}]`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 9\n  }, this);\n};\n\n// --- My Files View ---\n_c11 = Header;\nconst MyFilesView = ({\n  files,\n  refreshFiles,\n  setModalFile,\n  setIsModalOpen\n}) => {\n  _s6();\n  const {\n    db,\n    storage,\n    userId\n  } = useFirebase();\n  const logActivity = useActivityLogger();\n  const fileInputRef = useRef(null);\n  const [isUploading, setIsUploading] = useState(false);\n\n  // Placeholder for folder creation (currently non-functional for simplicity in one-file context)\n  const handleNewFolder = () => {\n    // In a real app, this would create a new folder document in Firestore\n    alert(\"Folder creation feature is noted! For this one-file demo, we'll focus on the robust file upload/download functionality.\");\n  };\n  const handleFileChange = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    setIsUploading(true);\n    const fileName = file.name;\n    const fileType = file.type || getFileType(fileName);\n    const fileSize = file.size;\n    try {\n      // 1. Upload file to Firebase Storage\n      const storagePath = `${appId}/${userId}/files/${fileName}_${Date.now()}`;\n      const storageRef = ref(storage, storagePath);\n      const snapshot = await uploadBytes(storageRef, file);\n      const downloadUrl = await getDownloadURL(snapshot.ref);\n\n      // 2. Save metadata to Firestore\n      const fileCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/files`);\n      await addDoc(fileCollectionRef, {\n        fileName,\n        fileType,\n        fileSize,\n        storagePath,\n        downloadUrl,\n        uploadDate: serverTimestamp()\n      });\n\n      // 3. Log activity\n      logActivity('UPLOAD', {\n        fileName,\n        fileSize: formatFileSize(fileSize)\n      });\n    } catch (error) {\n      console.error(\"Upload failed:\", error);\n      // Show custom error modal instead of alert\n      alert(\"File upload failed. Check the console for details.\");\n    } finally {\n      setIsUploading(false);\n      event.target.value = null; // Clear input field\n    }\n  };\n  const handleDeleteFile = async file => {\n    try {\n      // 1. Delete from Firebase Storage\n      const fileRef = ref(storage, file.storagePath);\n      await deleteObject(fileRef);\n\n      // 2. Delete metadata from Firestore\n      const docRef = doc(db, `artifacts/${appId}/users/${userId}/files`, file.id);\n      await deleteDoc(docRef);\n\n      // 3. Log activity\n      logActivity('DELETE', {\n        fileId: file.id,\n        fileName: file.fileName\n      });\n    } catch (error) {\n      console.error(\"Error deleting file:\", error);\n      alert(\"Could not delete file from storage. It may have already been removed.\");\n    }\n  };\n  const handleFileClick = file => {\n    setModalFile(file);\n    setIsModalOpen(true);\n  };\n  const FileRow = ({\n    file\n  }) => {\n    var _file$uploadDate;\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      className: `border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150 cursor-pointer`,\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        className: \"p-4 flex items-center gap-3\",\n        onClick: () => handleFileClick(file),\n        children: [/*#__PURE__*/_jsxDEV(FileIconByType, {\n          type: getFileType(file.fileName)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `font-semibold text-[${COLORS.textColor}]`,\n          children: file.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: `p-4 text-[${COLORS.textColor}]`,\n        children: file.fileType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: `p-4 text-[${COLORS.textColor}]`,\n        children: formatFileSize(file.fileSize)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: `p-4 text-[${COLORS.textColor}]`,\n        children: new Date(((_file$uploadDate = file.uploadDate) === null || _file$uploadDate === void 0 ? void 0 : _file$uploadDate.seconds) * 1000).toLocaleString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            handleFileClick(file);\n          },\n          className: `text-sm bg-[${COLORS.mint}] text-[${COLORS.mintText}] px-3 py-1 rounded-full font-medium hover:bg-opacity-80 transition`,\n          children: \"View Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4 border-b pb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: `text-xl font-semibold text-[${COLORS.textColor}] flex-shrink-0`,\n        children: [\"My Files (\", files.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNewFolder,\n          className: `flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-gray-500 hover:bg-gray-600 shadow-md disabled:opacity-50`,\n          children: [/*#__PURE__*/_jsxDEV(FolderIcon, {\n            className: \"h-5 w-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 25\n          }, this), \"New Folder\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileChange,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _fileInputRef$current;\n            return !isUploading && ((_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click());\n          },\n          disabled: isUploading,\n          className: `flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-[${COLORS.sage}] hover:bg-[${COLORS.darkSage}] shadow-md disabled:opacity-50`,\n          children: [/*#__PURE__*/_jsxDEV(UploadIcon, {\n            className: \"h-5 w-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 25\n          }, this), isUploading ? 'Uploading...' : 'Upload File']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto min-h-[400px]\",\n      children: files.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-10 text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(FileTextIcon, {\n          className: \"h-10 w-10 mx-auto text-gray-400 mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No files uploaded yet. Start by clicking \\\"Upload File\\\".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full text-left border-collapse\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"border-b bg-gray-50\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"File Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: files.map(file => /*#__PURE__*/_jsxDEV(FileRow, {\n            file: file\n          }, file.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 9\n  }, this);\n};\n\n// Simple icon mapping utility for MyFilesView\n_s6(MyFilesView, \"12TemHhft71KZ+E+CXls/HLXDbQ=\", false, function () {\n  return [useFirebase, useActivityLogger];\n});\n_c12 = MyFilesView;\nconst FileIconByType = ({\n  type\n}) => {\n  let Icon;\n  let iconClass = \"h-6 w-6 mr-3 text-gray-500\";\n  switch (type) {\n    case 'Image':\n      Icon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"3\",\n          y: \"3\",\n          width: \"18\",\n          height: \"18\",\n          rx: \"2\",\n          ry: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 214\n        }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"8.5\",\n          cy: \"8.5\",\n          r: \"1.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 276\n        }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n          points: \"21 15 16 10 5 21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 319\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 36\n      }, this);\n      iconClass = `h-6 w-6 mr-3 text-blue-500`;\n      break;\n    case 'PDF':\n      Icon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 2v10l-4-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 212\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 2v10l4-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 243\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M5 19v-5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 273\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M5 19a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 332\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 34\n      }, this);\n      iconClass = `h-6 w-6 mr-3 text-red-500`;\n      break;\n    case 'Document':\n      Icon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 217\n        }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n          points: \"14 2 14 8 20 8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 304\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 39\n      }, this);\n      iconClass = `h-6 w-6 mr-3 text-green-600`;\n      break;\n    case 'Archive':\n      Icon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 216\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M3 15h3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 308\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M18 15h3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 333\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M3 12h3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 359\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M18 12h3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 384\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M10 8h4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 410\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 38\n      }, this);\n      iconClass = `h-6 w-6 mr-3 text-yellow-600`;\n      break;\n    default:\n      Icon = FileTextIcon;\n      iconClass = `h-6 w-6 mr-3 text-gray-500`;\n      break;\n  }\n  return /*#__PURE__*/_jsxDEV(Icon, {\n    className: iconClass\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 539,\n    columnNumber: 12\n  }, this);\n};\n\n// --- History View ---\n_c13 = FileIconByType;\nconst HistoryView = ({\n  files\n}) => {\n  _s7();\n  // History is essentially just a list of uploaded files, sorted by date.\n  // We can use the 'files' data fetched for 'My Files'.\n\n  const sortedFiles = useMemo(() => {\n    return [...files].sort((a, b) => b.uploadDate.seconds - a.uploadDate.seconds);\n  }, [files]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: `text-xl font-semibold text-[${COLORS.textColor}] mb-6 border-b pb-4`,\n      children: \"Upload History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto min-h-[400px]\",\n      children: sortedFiles.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-10 text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(HistoryIcon, {\n          className: \"h-10 w-10 mx-auto text-gray-400 mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No upload history found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full text-left border-collapse\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"border-b bg-gray-50\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"File Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Upload Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: sortedFiles.map(file => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: `border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150`,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-4 flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(FileIconByType, {\n                type: getFileType(file.fileName)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `font-semibold text-[${COLORS.textColor}]`,\n                children: file.fileName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 text-[${COLORS.textColor}]`,\n              children: file.fileType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 text-[${COLORS.textColor}]`,\n              children: formatFileSize(file.fileSize)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 text-[${COLORS.textColor}]`,\n              children: new Date(file.uploadDate.seconds * 1000).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 37\n            }, this)]\n          }, file.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 553,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Activity Logs View ---\n_s7(HistoryView, \"U7M085lzeLcINkqtLuuYKlq3FMU=\");\n_c14 = HistoryView;\nconst ActivityLogView = ({\n  logs\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: `text-xl font-semibold text-[${COLORS.textColor}] mb-6 border-b pb-4`,\n      children: \"Activity Logs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto min-h-[400px]\",\n      children: logs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-10 text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(ZapIcon, {\n          className: \"h-10 w-10 mx-auto text-gray-400 mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No activity logs found. Start interacting with your files!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full text-left border-collapse\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"border-b bg-gray-50\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-4 font-medium text-gray-600\",\n              children: \"Timestamp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: logs.map(log => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: `border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150`,\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 font-semibold ${log.action === 'DELETE' ? 'text-red-600' : log.action === 'UPLOAD' ? 'text-green-600' : 'text-blue-600'}`,\n              children: log.action\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 text-[${COLORS.textColor}]`,\n              children: [log.details.fileName ? log.details.fileName : log.details.fileId, log.details.fileSize && ` (${log.details.fileSize})`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: `p-4 text-[${COLORS.textColor}]`,\n              children: new Date(log.timestamp.seconds * 1000).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 37\n            }, this)]\n          }, log.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 597,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Data Fetching Hook ---\n_c15 = ActivityLogView;\nconst useUserFiles = () => {\n  _s8();\n  const {\n    db,\n    userId,\n    isAuthReady\n  } = useFirebase();\n  const [files, setFiles] = useState([]);\n  const [logs, setLogs] = useState([]);\n  useEffect(() => {\n    // CRITICAL GUARD: Only run listeners if auth is ready AND we have a valid userId (uid)\n    if (!isAuthReady || !db || !userId) return;\n\n    // 1. Listen to User Files Collection (Metadata)\n    const filesCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/files`);\n    const filesQuery = query(filesCollectionRef, orderBy('uploadDate', 'desc'));\n    const unsubscribeFiles = onSnapshot(filesQuery, snapshot => {\n      const fileList = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        // Ensure uploadDate is a timestamp object before use\n        uploadDate: doc.data().uploadDate || {\n          seconds: Date.now() / 1000\n        }\n      }));\n      setFiles(fileList);\n    }, error => {\n      console.error(\"Error listening to files:\", error);\n    });\n\n    // 2. Listen to Activity Logs Collection\n    const logsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/activity_logs`);\n    const logsQuery = query(logsCollectionRef, orderBy('timestamp', 'desc'), limit(50));\n    const unsubscribeLogs = onSnapshot(logsQuery, snapshot => {\n      const logList = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        timestamp: doc.data().timestamp || {\n          seconds: Date.now() / 1000\n        }\n      }));\n      setLogs(logList);\n    }, error => {\n      console.error(\"Error listening to logs:\", error);\n    });\n\n    // Cleanup subscriptions on unmount\n    return () => {\n      unsubscribeFiles();\n      unsubscribeLogs();\n    };\n  }, [isAuthReady, db, userId]);\n  return {\n    files,\n    logs\n  };\n};\n\n// --- Main App Component ---\n_s8(useUserFiles, \"Z5hmMCGa/16XFn0axhgkuj7pAA4=\", false, function () {\n  return [useFirebase];\n});\nfunction UserDashboardContent() {\n  _s9();\n  const [activeView, setActiveView] = useState('My Files');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [modalFile, setModalFile] = useState(null);\n  const {\n    files,\n    logs\n  } = useUserFiles();\n  const {\n    storage,\n    db,\n    userId\n  } = useFirebase();\n\n  // The handler must be passed down to the modal for deletion\n  const handleDeleteFile = async file => {\n    // Reuse the logic from MyFilesView\n    try {\n      // 1. Delete from Firebase Storage\n      const fileRef = ref(storage, file.storagePath);\n      await deleteObject(fileRef);\n\n      // 2. Delete metadata from Firestore\n      const docRef = doc(db, `artifacts/${appId}/users/${userId}/files`, file.id);\n      await deleteDoc(docRef);\n\n      // 3. Log activity (already handled in useActivityLogger)\n    } catch (error) {\n      console.error(\"Error deleting file:\", error);\n      throw new Error(\"Deletion failed.\"); // Re-throw to handle state update in modal\n    }\n  };\n  const renderContent = () => {\n    switch (activeView) {\n      case 'My Files':\n        return /*#__PURE__*/_jsxDEV(MyFilesView, {\n          files: files,\n          setModalFile: setModalFile,\n          setIsModalOpen: setIsModalOpen,\n          handleDeleteFile: handleDeleteFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 21\n        }, this);\n      case 'History':\n        return /*#__PURE__*/_jsxDEV(HistoryView, {\n          files: files\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 24\n        }, this);\n      case 'Activity Logs':\n        return /*#__PURE__*/_jsxDEV(ActivityLogView, {\n          logs: logs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 24\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(MyFilesView, {\n          files: files\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 24\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex h-screen bg-[${COLORS.offWhite}] font-sans antialiased`,\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      activeView: activeView,\n      setActiveView: setActiveView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 742,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 flex flex-col overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        title: activeView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6 overflow-y-auto\",\n        children: renderContent()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FileDetailModal, {\n      file: modalFile,\n      isOpen: isModalOpen,\n      onClose: () => setIsModalOpen(false),\n      handleDeleteFile: handleDeleteFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 741,\n    columnNumber: 9\n  }, this);\n}\n\n// Wrapper component to provide Firebase Context\n_s9(UserDashboardContent, \"cKMZkYIpw9ftdafPz0MXA+9qTtg=\", false, function () {\n  return [useUserFiles, useFirebase];\n});\n_c16 = UserDashboardContent;\nexport default function UserFileDashboard() {\n  return /*#__PURE__*/_jsxDEV(FirebaseProvider, {\n    children: /*#__PURE__*/_jsxDEV(UserDashboardContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 762,\n    columnNumber: 9\n  }, this);\n}\n_c17 = UserFileDashboard;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17;\n$RefreshReg$(_c, \"FileTextIcon\");\n$RefreshReg$(_c2, \"UploadIcon\");\n$RefreshReg$(_c3, \"FolderIcon\");\n$RefreshReg$(_c4, \"HistoryIcon\");\n$RefreshReg$(_c5, \"ZapIcon\");\n$RefreshReg$(_c6, \"DownloadIcon\");\n$RefreshReg$(_c7, \"XIcon\");\n$RefreshReg$(_c8, \"TrashIcon\");\n$RefreshReg$(_c9, \"FirebaseProvider\");\n$RefreshReg$(_c0, \"Modal\");\n$RefreshReg$(_c1, \"FileDetailModal\");\n$RefreshReg$(_c10, \"Sidebar\");\n$RefreshReg$(_c11, \"Header\");\n$RefreshReg$(_c12, \"MyFilesView\");\n$RefreshReg$(_c13, \"FileIconByType\");\n$RefreshReg$(_c14, \"HistoryView\");\n$RefreshReg$(_c15, \"ActivityLogView\");\n$RefreshReg$(_c16, \"UserDashboardContent\");\n$RefreshReg$(_c17, \"UserFileDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","initializeApp","getAuth","signInWithCustomToken","signInAnonymously","onAuthStateChanged","getFirestore","collection","query","onSnapshot","addDoc","serverTimestamp","doc","deleteDoc","orderBy","limit","getStorage","ref","uploadBytes","getDownloadURL","deleteObject","firebaseConfig","appId","initialAuthToken","jsxDEV","_jsxDEV","COLORS","sage","mint","lightSage","offWhite","darkSage","textColor","mintText","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFileType","filename","ext","split","pop","toLowerCase","FileTextIcon","className","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","d","fileName","_jsxFileName","lineNumber","columnNumber","points","x1","y1","x2","y2","_c","UploadIcon","_c2","FolderIcon","_c3","HistoryIcon","cx","cy","r","_c4","ZapIcon","_c5","DownloadIcon","_c6","XIcon","_c7","TrashIcon","_c8","FirebaseContext","createContext","FirebaseProvider","_s","db","setDb","auth","setAuth","storage","setStorage","userId","setUserId","isAuthReady","setIsAuthReady","unsubscribe","initFirebase","app","authInstance","dbInstance","storageInstance","error","console","anonError","user","uid","e","contextValue","Provider","value","_c9","useFirebase","_s2","useContext","useActivityLogger","_s3","logActivity","action","details","timestamp","logCollectionRef","setTimeout","catch","Modal","title","onClose","isOpen","onClick","stopPropagation","_c0","FileDetailModal","file","handleDeleteFile","_s4","previewUrl","setPreviewUrl","isDeleting","setIsDeleting","downloadUrl","fileType","handleDownload","fileId","id","window","open","confirmDelete","fileSize","Date","uploadDate","seconds","toLocaleString","src","alt","disabled","_c1","Sidebar","activeView","setActiveView","_s5","navItems","name","icon","map","item","href","preventDefault","_c10","Header","random","onError","target","onerror","_c11","MyFilesView","files","refreshFiles","setModalFile","setIsModalOpen","_s6","fileInputRef","isUploading","setIsUploading","handleNewFolder","alert","handleFileChange","event","type","size","storagePath","now","storageRef","snapshot","fileCollectionRef","fileRef","docRef","handleFileClick","FileRow","_file$uploadDate","FileIconByType","length","onChange","_fileInputRef$current","current","click","_c12","Icon","iconClass","x","y","rx","ry","_c13","HistoryView","_s7","sortedFiles","sort","a","b","_c14","ActivityLogView","logs","_c15","useUserFiles","_s8","setFiles","setLogs","filesCollectionRef","filesQuery","unsubscribeFiles","fileList","docs","data","logsCollectionRef","logsQuery","unsubscribeLogs","logList","UserDashboardContent","_s9","isModalOpen","modalFile","Error","renderContent","_c16","UserFileDashboard","_c17","$RefreshReg$"],"sources":["C:/Users/yuvasri/OneDrive/Desktop/Digital lock product/reactapp/src/components/UserFileDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\r\n\r\n// --- Firebase Imports ---\r\n// NOTE: These are imported globally in the execution environment.\r\n// For demonstration, we assume these are available.\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\r\nimport { getFirestore, collection, query, onSnapshot, addDoc, serverTimestamp, doc, deleteDoc, orderBy, limit } from 'firebase/firestore';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\r\n\r\nimport { firebaseConfig, appId, initialAuthToken } from '../firebase.config'\r\n// --- Custom Theme Colors ---\r\nconst COLORS = {\r\n    sage: '#96A78D',      // Darker base green/grey (Sidebar, Buttons)\r\n    mint: '#B6CEB4',      // Medium primary green (Active State, Accents)\r\n    lightSage: '#D9E9CF', // Lightest background/hover green\r\n    offWhite: '#F0F0F0',  // Near white background\r\n    \r\n    // Derived colors for contrast and subtle effects\r\n    darkSage: '#7E8F76',\r\n    textColor: '#374151', \r\n    mintText: '#547A50',\r\n};\r\n\r\n// --- Firebase Initialization Variables ---\r\n// IMPORTANT: These global variables are provided by the canvas environment.\r\n// const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\n// const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\r\n// const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\n//import { firebaseConfig, appId, initialAuthToken } from '../firebase.config';\r\n\r\n// --- Utility Functions ---\r\n\r\n// Converts bytes to a human-readable size string\r\nconst formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\n// Extracts file extension and determines a general type for icon display\r\nconst getFileType = (filename) => {\r\n    const ext = filename.split('.').pop().toLowerCase();\r\n    switch (ext) {\r\n        case 'pdf': return 'PDF';\r\n        case 'doc':\r\n        case 'docx': return 'Document';\r\n        case 'xls':\r\n        case 'xlsx': return 'Spreadsheet';\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'png':\r\n        case 'gif': return 'Image';\r\n        case 'mp4':\r\n        case 'mov': return 'Video';\r\n        case 'txt': return 'Text';\r\n        case 'zip':\r\n        case 'rar': return 'Archive';\r\n        default: return 'Other';\r\n    }\r\n};\r\n\r\n// --- SVG Icon Components (Phosphor/Lucide Icons) ---\r\nconst FileTextIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L15 2z\"></path><polyline points=\"14 2 14 8 20 8\"></polyline><line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"></line><line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"></line><line x1=\"10\" y1=\"9\" x2=\"8\" y2=\"9\"></line></svg>);\r\nconst UploadIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>);\r\nconst FolderIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2z\"></path></svg>);\r\nconst HistoryIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M12 2v5\"></path><path d=\"M12 17v5\"></path><path d=\"M17.8 19.2 16 17.4\"></path><path d=\"M4.2 4.8 6 6.6\"></path><path d=\"M19.2 17.8 17.4 16\"></path><path d=\"M6.6 6l-1.8 1.8\"></path><path d=\"M19.9 12H17\"></path><path d=\"M7 12H4.1\"></path><circle cx=\"12\" cy=\"12\" r=\"10\"></circle></svg>);\r\nconst ZapIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"></polygon></svg>);\r\nconst DownloadIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"7 10 12 15 17 10\"></polyline><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line></svg>);\r\nconst XIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M18 6 6 18\"></path><path d=\"m6 6 12 12\"></path></svg>);\r\nconst TrashIcon = ({ className = \"h-5 w-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M3 6h18\"></path><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"></path><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"></path></svg>);\r\n\r\n// --- Firebase Context and Utility ---\r\n\r\nconst FirebaseContext = React.createContext(null);\r\n\r\nconst FirebaseProvider = ({ children }) => {\r\n    const [db, setDb] = useState(null);\r\n    const [auth, setAuth] = useState(null);\r\n    const [storage, setStorage] = useState(null);\r\n    const [userId, setUserId] = useState(null);\r\n    const [isAuthReady, setIsAuthReady] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let unsubscribe = () => {};\r\n\r\n        const initFirebase = async () => {\r\n            try {\r\n                const app = initializeApp(firebaseConfig);\r\n                const authInstance = getAuth(app);\r\n                const dbInstance = getFirestore(app);\r\n                const storageInstance = getStorage(app);\r\n                \r\n                setDb(dbInstance);\r\n                setAuth(authInstance);\r\n                setStorage(storageInstance);\r\n\r\n                // 1. Attempt to sign in (Custom Token or Anonymous)\r\n                try {\r\n                    if (initialAuthToken) {\r\n                        await signInWithCustomToken(authInstance, initialAuthToken);\r\n                    } else {\r\n                        await signInAnonymously(authInstance);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Initial Firebase Auth failed, attempting anonymous fallback:\", error);\r\n                    // 2. If custom token fails, ensure we sign in anonymously as a fallback\r\n                    try {\r\n                        await signInAnonymously(authInstance);\r\n                    } catch (anonError) {\r\n                        console.error(\"Anonymous sign-in failed too. Dashboard will not load.\", anonError);\r\n                        // If all auth fails, stop here and display loading state indefinitely or an error\r\n                        setIsAuthReady(true); \r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // 3. Set up the auth state change listener to finalize user ID and readiness\r\n                // This will fire immediately after the awaited sign-in above completes.\r\n                unsubscribe = onAuthStateChanged(authInstance, (user) => {\r\n                    if (user && user.uid) { // CRITICAL: Only use UID if user object is present\r\n                        setUserId(user.uid);\r\n                        console.log(\"Authentication successful. User ID:\", user.uid);\r\n                    } else {\r\n                        // If authentication fails, user will be null. Do not set a random ID.\r\n                        console.error(\"Authentication failed: No user found after sign-in attempts.\");\r\n                        setUserId(null); \r\n                    }\r\n                    setIsAuthReady(true);\r\n                });\r\n\r\n            } catch (e) {\r\n                console.error(\"Firebase Initialization Failed:\", e);\r\n                setIsAuthReady(true);\r\n            }\r\n        };\r\n\r\n        initFirebase();\r\n\r\n        // Cleanup function for the effect\r\n        return () => unsubscribe(); \r\n\r\n    }, []);\r\n\r\n    // Memoize the context value to prevent unnecessary re-renders\r\n    const contextValue = useMemo(() => ({ db, auth, storage, userId, isAuthReady }), [db, auth, storage, userId, isAuthReady]);\r\n\r\n    if (!isAuthReady) {\r\n        return (\r\n            <div className={`flex items-center justify-center h-screen bg-[${COLORS.offWhite}] text-[${COLORS.textColor}]`}>\r\n                <p>Connecting to secure file storage...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <FirebaseContext.Provider value={contextValue}>\r\n            {children}\r\n        </FirebaseContext.Provider>\r\n    );\r\n};\r\n\r\n// Custom hook to use Firebase context\r\nconst useFirebase = () => React.useContext(FirebaseContext);\r\n\r\n\r\n// --- Activity Logging Utility ---\r\nconst useActivityLogger = () => {\r\n    const { db, userId } = useFirebase();\r\n\r\n    const logActivity = (action, details = {}) => {\r\n        if (!db || !userId) return;\r\n\r\n        const log = {\r\n            userId: userId,\r\n            action: action, // e.g., \"UPLOAD\", \"DELETE\", \"DOWNLOAD\"\r\n            details: details,\r\n            timestamp: serverTimestamp(),\r\n        };\r\n\r\n        const logCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/activity_logs`);\r\n\r\n        // Use setTimeout with a tiny delay to prevent blocking the main thread\r\n        // during high-frequency operations, though for this app it's mostly for async safety.\r\n        setTimeout(() => {\r\n            addDoc(logCollectionRef, log).catch(e => console.error(\"Error writing activity log:\", e));\r\n        }, 0);\r\n    };\r\n\r\n    return logActivity;\r\n};\r\n\r\n\r\n// --- Modals and Preview Components ---\r\n\r\nconst Modal = ({ title, children, onClose, isOpen }) => {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" onClick={onClose}>\r\n            <div \r\n                className={`bg-white rounded-xl shadow-2xl max-w-lg w-full transform transition-all overflow-hidden`}\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <div className={`p-4 flex justify-between items-center border-b bg-[${COLORS.lightSage}]`}>\r\n                    <h3 className={`text-xl font-semibold text-[${COLORS.textColor}]`}>{title}</h3>\r\n                    <button onClick={onClose} className=\"text-gray-600 hover:text-red-500 p-2 rounded-full transition\">\r\n                        <XIcon className=\"h-6 w-6\" />\r\n                    </button>\r\n                </div>\r\n                <div className=\"p-6 max-h-[80vh] overflow-y-auto\">\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst FileDetailModal = ({ file, isOpen, onClose, handleDeleteFile }) => {\r\n    const logActivity = useActivityLogger();\r\n    const [previewUrl, setPreviewUrl] = useState(null);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setPreviewUrl(null);\r\n        if (file?.downloadUrl) {\r\n            const fileType = getFileType(file.fileName);\r\n            // Simple preview mechanism for images/text\r\n            if (fileType === 'Image' || fileType === 'Text') {\r\n                 // For security and simplicity in a demo environment, we just use the download URL\r\n                 // Note: In a production app, you might use a safer preview service/method\r\n                 setPreviewUrl(file.downloadUrl);\r\n            }\r\n        }\r\n    }, [file]);\r\n\r\n    if (!file) return null;\r\n\r\n    const handleDownload = () => {\r\n        // Log download activity\r\n        logActivity('DOWNLOAD', { fileId: file.id, fileName: file.fileName });\r\n        // Trigger native browser download\r\n        window.open(file.downloadUrl, '_blank');\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        if (!isDeleting) {\r\n            setIsDeleting(true);\r\n            try {\r\n                await handleDeleteFile(file);\r\n                onClose();\r\n            } catch (error) {\r\n                console.error(\"Failed to delete file:\", error);\r\n                // Optionally show error message\r\n            } finally {\r\n                setIsDeleting(false);\r\n            }\r\n    \r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal title={`File Details: ${file.fileName}`} isOpen={isOpen} onClose={onClose}>\r\n            <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                    <p className=\"font-semibold text-sm\">File Name</p>\r\n                    <p className=\"text-sm\">{file.fileName}</p>\r\n                </div>\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                    <p className=\"font-semibold text-sm\">File Type</p>\r\n                    <p className=\"text-sm\">{file.fileType}</p>\r\n                </div>\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                    <p className=\"font-semibold text-sm\">File Size</p>\r\n                    <p className=\"text-sm\">{formatFileSize(file.fileSize)}</p>\r\n                </div>\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                    <p className=\"font-semibold text-sm\">Upload Date</p>\r\n                    <p className=\"text-sm\">{new Date(file.uploadDate.seconds * 1000).toLocaleString()}</p>\r\n                </div>\r\n\r\n                {/* File Preview Section */}\r\n                {previewUrl && (\r\n                    <div className=\"mt-6 border border-gray-200 rounded-lg p-4 text-center\">\r\n                        <p className={`font-semibold text-[${COLORS.textColor}] mb-3`}>File Preview</p>\r\n                        {getFileType(file.fileName) === 'Image' ? (\r\n                            <img src={previewUrl} alt=\"File Preview\" className=\"max-w-full max-h-60 mx-auto rounded-lg shadow-md object-contain\" />\r\n                        ) : (\r\n                            <p className=\"text-gray-500 italic\">No visual preview available for this file type. Click download to view.</p>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Actions */}\r\n                <div className=\"flex justify-end gap-3 pt-4 border-t mt-6\">\r\n                    <button\r\n                        onClick={confirmDelete}\r\n                        disabled={isDeleting}\r\n                        className={`flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-red-500 hover:bg-red-600 shadow-md disabled:opacity-50`}\r\n                    >\r\n                        <TrashIcon className=\"h-5 w-5 mr-2\" />\r\n                        {isDeleting ? 'Deleting...' : 'Delete File'}\r\n                    </button>\r\n                    <button\r\n                        onClick={handleDownload}\r\n                        className={`flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-[${COLORS.sage}] hover:bg-[${COLORS.darkSage}] shadow-md`}\r\n                    >\r\n                        <DownloadIcon className=\"h-5 w-5 mr-2\" />\r\n                        Download\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\n// --- View Components ---\r\n\r\nconst Sidebar = ({ activeView, setActiveView }) => {\r\n    const { userId } = useFirebase();\r\n\r\n    const navItems = [\r\n        { name: 'My Files', icon: FileTextIcon },\r\n        { name: 'History', icon: HistoryIcon },\r\n        { name: 'Activity Logs', icon: ZapIcon },\r\n    ];\r\n    \r\n    return (\r\n        <aside className={`w-64 flex-shrink-0 bg-[${COLORS.sage}] text-gray-800 flex flex-col p-4 shadow-xl`}>\r\n            <div className=\"text-white text-2xl font-bold mb-6 flex items-center gap-2\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M12 2a10 10 0 0 0-9.25 15.68l.06.07a8.5 8.5 0 0 1-.22 1.63L2 22l3.78-.95a9 9 0 0 0 1.63-.22l.07.06A10 10 0 1 0 12 2Z\"></path></svg>\r\n                <span>User Dashboard</span>\r\n            </div>\r\n            <div className=\"text-white text-xs mb-8 p-2 rounded-lg bg-[${COLORS.darkSage}] break-all\">\r\n                User ID: <span className=\"font-mono text-xs\">{userId || 'Awaiting Auth...'}</span>\r\n            </div>\r\n            <nav className=\"flex-grow\">\r\n                <ul>\r\n                    {navItems.map(item => (\r\n                        <li key={item.name}>\r\n                            <a\r\n                                href=\"#\"\r\n                                onClick={(e) => {e.preventDefault(); setActiveView(item.name);}}\r\n                                className={`flex items-center gap-3 px-4 py-3 my-1 rounded-lg transition-colors duration-200 ${\r\n                                    activeView === item.name\r\n                                        ? `bg-[${COLORS.mint}] text-[${COLORS.mintText}] shadow-md font-semibold`\r\n                                        : `hover:bg-[${COLORS.darkSage}] hover:text-white text-white`\r\n                                }`}\r\n                            >\r\n                                <item.icon className={`h-5 w-5 ${activeView === item.name ? `text-[${COLORS.mintText}]` : `text-white`}`}/>\r\n                                <span>{item.name}</span>\r\n                            </a>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </nav>\r\n        </aside>\r\n    );\r\n};\r\n\r\nconst Header = ({ title }) => {\r\n    return (\r\n        <header className=\"bg-white sticky top-0 z-10 shadow-sm p-4 flex justify-between items-center\">\r\n            <h1 className={`text-2xl font-semibold text-[${COLORS.textColor}]`}>{title}</h1>\r\n            <div className=\"flex items-center gap-4\">\r\n                <img src={`https://i.pravatar.cc/150?u=user-${Math.random()}`} onError={(e) => { e.target.onerror = null; e.target.src=\"https://placehold.co/150x150/F0F0F0/96A78D?text=US\" }} alt=\"User Avatar\" className={`h-10 w-10 rounded-full object-cover ring-2 ring-[${COLORS.mint}]`} />\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// --- My Files View ---\r\nconst MyFilesView = ({ files, refreshFiles, setModalFile, setIsModalOpen }) => {\r\n    const { db, storage, userId } = useFirebase();\r\n    const logActivity = useActivityLogger();\r\n    const fileInputRef = useRef(null);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    // Placeholder for folder creation (currently non-functional for simplicity in one-file context)\r\n    const handleNewFolder = () => {\r\n        // In a real app, this would create a new folder document in Firestore\r\n        alert(\"Folder creation feature is noted! For this one-file demo, we'll focus on the robust file upload/download functionality.\");\r\n    };\r\n\r\n    const handleFileChange = async (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        setIsUploading(true);\r\n        const fileName = file.name;\r\n        const fileType = file.type || getFileType(fileName);\r\n        const fileSize = file.size;\r\n\r\n        try {\r\n            // 1. Upload file to Firebase Storage\r\n            const storagePath = `${appId}/${userId}/files/${fileName}_${Date.now()}`;\r\n            const storageRef = ref(storage, storagePath);\r\n            \r\n            const snapshot = await uploadBytes(storageRef, file);\r\n            const downloadUrl = await getDownloadURL(snapshot.ref);\r\n\r\n            // 2. Save metadata to Firestore\r\n            const fileCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/files`);\r\n            await addDoc(fileCollectionRef, {\r\n                fileName,\r\n                fileType,\r\n                fileSize,\r\n                storagePath,\r\n                downloadUrl,\r\n                uploadDate: serverTimestamp(),\r\n            });\r\n\r\n            // 3. Log activity\r\n            logActivity('UPLOAD', { fileName, fileSize: formatFileSize(fileSize) });\r\n\r\n        } catch (error) {\r\n            console.error(\"Upload failed:\", error);\r\n            // Show custom error modal instead of alert\r\n            alert(\"File upload failed. Check the console for details.\");\r\n        } finally {\r\n            setIsUploading(false);\r\n            event.target.value = null; // Clear input field\r\n        }\r\n    };\r\n\r\n    const handleDeleteFile = async (file) => {\r\n        try {\r\n            // 1. Delete from Firebase Storage\r\n            const fileRef = ref(storage, file.storagePath);\r\n            await deleteObject(fileRef);\r\n\r\n            // 2. Delete metadata from Firestore\r\n            const docRef = doc(db, `artifacts/${appId}/users/${userId}/files`, file.id);\r\n            await deleteDoc(docRef);\r\n\r\n            // 3. Log activity\r\n            logActivity('DELETE', { fileId: file.id, fileName: file.fileName });\r\n            \r\n        } catch (error) {\r\n            console.error(\"Error deleting file:\", error);\r\n            alert(\"Could not delete file from storage. It may have already been removed.\");\r\n        }\r\n    };\r\n\r\n    const handleFileClick = (file) => {\r\n        setModalFile(file);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const FileRow = ({ file }) => (\r\n        <tr className={`border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150 cursor-pointer`}>\r\n            <td className=\"p-4 flex items-center gap-3\" onClick={() => handleFileClick(file)}>\r\n                <FileIconByType type={getFileType(file.fileName)} />\r\n                <p className={`font-semibold text-[${COLORS.textColor}]`}>{file.fileName}</p>\r\n            </td>\r\n            <td className={`p-4 text-[${COLORS.textColor}]`}>{file.fileType}</td>\r\n            <td className={`p-4 text-[${COLORS.textColor}]`}>{formatFileSize(file.fileSize)}</td>\r\n            <td className={`p-4 text-[${COLORS.textColor}]`}>{new Date(file.uploadDate?.seconds * 1000).toLocaleString()}</td>\r\n            <td className=\"p-4\">\r\n                <button\r\n                    onClick={(e) => { e.stopPropagation(); handleFileClick(file); }}\r\n                    className={`text-sm bg-[${COLORS.mint}] text-[${COLORS.mintText}] px-3 py-1 rounded-full font-medium hover:bg-opacity-80 transition`}\r\n                >\r\n                    View Details\r\n                </button>\r\n            </td>\r\n        </tr>\r\n    );\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4 border-b pb-4\">\r\n                <h2 className={`text-xl font-semibold text-[${COLORS.textColor}] flex-shrink-0`}>My Files ({files.length})</h2>\r\n                <div className=\"flex gap-3\">\r\n                    <button \r\n                        onClick={handleNewFolder}\r\n                        className={`flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-gray-500 hover:bg-gray-600 shadow-md disabled:opacity-50`}\r\n                    >\r\n                        <FolderIcon className=\"h-5 w-5 mr-2\" />\r\n                        New Folder\r\n                    </button>\r\n                    \r\n                    <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" />\r\n                    <button \r\n                        onClick={() => !isUploading && fileInputRef.current?.click()}\r\n                        disabled={isUploading}\r\n                        className={`flex items-center px-4 py-2 rounded-lg font-semibold text-white transition bg-[${COLORS.sage}] hover:bg-[${COLORS.darkSage}] shadow-md disabled:opacity-50`}\r\n                    >\r\n                        <UploadIcon className=\"h-5 w-5 mr-2\" />\r\n                        {isUploading ? 'Uploading...' : 'Upload File'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"overflow-x-auto min-h-[400px]\">\r\n                {files.length === 0 ? (\r\n                    <div className=\"p-10 text-center text-gray-500\">\r\n                        <FileTextIcon className=\"h-10 w-10 mx-auto text-gray-400 mb-3\" />\r\n                        <p>No files uploaded yet. Start by clicking \"Upload File\".</p>\r\n                    </div>\r\n                ) : (\r\n                    <table className=\"min-w-full text-left border-collapse\">\r\n                        <thead className=\"border-b bg-gray-50\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-medium text-gray-600\">File Name</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Type</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Size</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Date</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {files.map(file => (\r\n                                <FileRow key={file.id} file={file} />\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Simple icon mapping utility for MyFilesView\r\nconst FileIconByType = ({ type }) => {\r\n    let Icon;\r\n    let iconClass = \"h-6 w-6 mr-3 text-gray-500\";\r\n\r\n    switch (type) {\r\n        case 'Image': Icon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle><polyline points=\"21 15 16 10 5 21\"></polyline></svg>; iconClass = `h-6 w-6 mr-3 text-blue-500`; break;\r\n        case 'PDF': Icon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M12 2v10l-4-4\"></path><path d=\"M12 2v10l4-4\"></path><path d=\"M5 19v-5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5\"></path><path d=\"M5 19a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2\"></path></svg>; iconClass = `h-6 w-6 mr-3 text-red-500`; break;\r\n        case 'Document': Icon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"></path><polyline points=\"14 2 14 8 20 8\"></polyline></svg>; iconClass = `h-6 w-6 mr-3 text-green-600`; break;\r\n        case 'Archive': Icon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-1\"></path><path d=\"M3 15h3\"></path><path d=\"M18 15h3\"></path><path d=\"M3 12h3\"></path><path d=\"M18 12h3\"></path><path d=\"M10 8h4\"></path></svg>; iconClass = `h-6 w-6 mr-3 text-yellow-600`; break;\r\n        default: Icon = FileTextIcon; iconClass = `h-6 w-6 mr-3 text-gray-500`; break;\r\n    }\r\n\r\n    return <Icon className={iconClass} />;\r\n};\r\n\r\n\r\n// --- History View ---\r\nconst HistoryView = ({ files }) => {\r\n    // History is essentially just a list of uploaded files, sorted by date.\r\n    // We can use the 'files' data fetched for 'My Files'.\r\n\r\n    const sortedFiles = useMemo(() => {\r\n        return [...files].sort((a, b) => b.uploadDate.seconds - a.uploadDate.seconds);\r\n    }, [files]);\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\">\r\n            <h2 className={`text-xl font-semibold text-[${COLORS.textColor}] mb-6 border-b pb-4`}>Upload History</h2>\r\n            \r\n            <div className=\"overflow-x-auto min-h-[400px]\">\r\n                {sortedFiles.length === 0 ? (\r\n                    <div className=\"p-10 text-center text-gray-500\">\r\n                        <HistoryIcon className=\"h-10 w-10 mx-auto text-gray-400 mb-3\" />\r\n                        <p>No upload history found.</p>\r\n                    </div>\r\n                ) : (\r\n                    <table className=\"min-w-full text-left border-collapse\">\r\n                        <thead className=\"border-b bg-gray-50\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-medium text-gray-600\">File Name</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Type</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Size</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Upload Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {sortedFiles.map(file => (\r\n                                <tr key={file.id} className={`border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150`}>\r\n                                    <td className=\"p-4 flex items-center gap-3\">\r\n                                        <FileIconByType type={getFileType(file.fileName)} />\r\n                                        <p className={`font-semibold text-[${COLORS.textColor}]`}>{file.fileName}</p>\r\n                                    </td>\r\n                                    <td className={`p-4 text-[${COLORS.textColor}]`}>{file.fileType}</td>\r\n                                    <td className={`p-4 text-[${COLORS.textColor}]`}>{formatFileSize(file.fileSize)}</td>\r\n                                    <td className={`p-4 text-[${COLORS.textColor}]`}>{new Date(file.uploadDate.seconds * 1000).toLocaleString()}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Activity Logs View ---\r\nconst ActivityLogView = ({ logs }) => {\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100\">\r\n            <h2 className={`text-xl font-semibold text-[${COLORS.textColor}] mb-6 border-b pb-4`}>Activity Logs</h2>\r\n            \r\n            <div className=\"overflow-x-auto min-h-[400px]\">\r\n                {logs.length === 0 ? (\r\n                    <div className=\"p-10 text-center text-gray-500\">\r\n                        <ZapIcon className=\"h-10 w-10 mx-auto text-gray-400 mb-3\" />\r\n                        <p>No activity logs found. Start interacting with your files!</p>\r\n                    </div>\r\n                ) : (\r\n                    <table className=\"min-w-full text-left border-collapse\">\r\n                        <thead className=\"border-b bg-gray-50\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Action</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Details</th>\r\n                                <th className=\"p-4 font-medium text-gray-600\">Timestamp</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {logs.map(log => (\r\n                                <tr key={log.id} className={`border-b hover:bg-[${COLORS.lightSage}]/50 transition duration-150`}>\r\n                                    <td className={`p-4 font-semibold ${log.action === 'DELETE' ? 'text-red-600' : log.action === 'UPLOAD' ? 'text-green-600' : 'text-blue-600'}`}>{log.action}</td>\r\n                                    <td className={`p-4 text-[${COLORS.textColor}]`}>\r\n                                        {log.details.fileName ? log.details.fileName : log.details.fileId}\r\n                                        {log.details.fileSize && ` (${log.details.fileSize})`}\r\n                                    </td>\r\n                                    <td className={`p-4 text-[${COLORS.textColor}]`}>{new Date(log.timestamp.seconds * 1000).toLocaleString()}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Data Fetching Hook ---\r\n\r\nconst useUserFiles = () => {\r\n    const { db, userId, isAuthReady } = useFirebase();\r\n    const [files, setFiles] = useState([]);\r\n    const [logs, setLogs] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // CRITICAL GUARD: Only run listeners if auth is ready AND we have a valid userId (uid)\r\n        if (!isAuthReady || !db || !userId) return;\r\n\r\n        // 1. Listen to User Files Collection (Metadata)\r\n        const filesCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/files`);\r\n        const filesQuery = query(filesCollectionRef, orderBy('uploadDate', 'desc'));\r\n\r\n        const unsubscribeFiles = onSnapshot(filesQuery, (snapshot) => {\r\n            const fileList = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n                // Ensure uploadDate is a timestamp object before use\r\n                uploadDate: doc.data().uploadDate || { seconds: Date.now() / 1000 } \r\n            }));\r\n            setFiles(fileList);\r\n        }, (error) => {\r\n            console.error(\"Error listening to files:\", error);\r\n        });\r\n        \r\n        // 2. Listen to Activity Logs Collection\r\n        const logsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/activity_logs`);\r\n        const logsQuery = query(logsCollectionRef, orderBy('timestamp', 'desc'), limit(50));\r\n\r\n        const unsubscribeLogs = onSnapshot(logsQuery, (snapshot) => {\r\n            const logList = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n                timestamp: doc.data().timestamp || { seconds: Date.now() / 1000 }\r\n            }));\r\n            setLogs(logList);\r\n        }, (error) => {\r\n            console.error(\"Error listening to logs:\", error);\r\n        });\r\n\r\n\r\n        // Cleanup subscriptions on unmount\r\n        return () => {\r\n            unsubscribeFiles();\r\n            unsubscribeLogs();\r\n        };\r\n\r\n    }, [isAuthReady, db, userId]);\r\n\r\n    return { files, logs };\r\n};\r\n\r\n\r\n// --- Main App Component ---\r\n\r\nfunction UserDashboardContent() {\r\n    const [activeView, setActiveView] = useState('My Files');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [modalFile, setModalFile] = useState(null);\r\n    const { files, logs } = useUserFiles();\r\n    const { storage, db, userId } = useFirebase();\r\n\r\n    // The handler must be passed down to the modal for deletion\r\n    const handleDeleteFile = async (file) => {\r\n        // Reuse the logic from MyFilesView\r\n        try {\r\n            // 1. Delete from Firebase Storage\r\n            const fileRef = ref(storage, file.storagePath);\r\n            await deleteObject(fileRef);\r\n\r\n            // 2. Delete metadata from Firestore\r\n            const docRef = doc(db, `artifacts/${appId}/users/${userId}/files`, file.id);\r\n            await deleteDoc(docRef);\r\n\r\n            // 3. Log activity (already handled in useActivityLogger)\r\n            \r\n        } catch (error) {\r\n            console.error(\"Error deleting file:\", error);\r\n            throw new Error(\"Deletion failed.\"); // Re-throw to handle state update in modal\r\n        }\r\n    };\r\n\r\n\r\n    const renderContent = () => {\r\n        switch(activeView) {\r\n            case 'My Files':\r\n                return (\r\n                    <MyFilesView \r\n                        files={files} \r\n                        setModalFile={setModalFile} \r\n                        setIsModalOpen={setIsModalOpen} \r\n                        handleDeleteFile={handleDeleteFile}\r\n                    />\r\n                );\r\n            case 'History':\r\n                return <HistoryView files={files} />;\r\n            case 'Activity Logs':\r\n                return <ActivityLogView logs={logs} />;\r\n            default:\r\n                return <MyFilesView files={files} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`flex h-screen bg-[${COLORS.offWhite}] font-sans antialiased`}>\r\n            <Sidebar activeView={activeView} setActiveView={setActiveView} />\r\n            <main className=\"flex-1 flex flex-col overflow-hidden\">\r\n                <Header title={activeView} />\r\n                <div className=\"flex-1 p-6 overflow-y-auto\">\r\n                    {renderContent()}\r\n                </div>\r\n            </main>\r\n            <FileDetailModal\r\n                file={modalFile}\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                handleDeleteFile={handleDeleteFile}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Wrapper component to provide Firebase Context\r\nexport default function UserFileDashboard() {\r\n    return (\r\n        <FirebaseProvider>\r\n            <UserDashboardContent />\r\n        </FirebaseProvider>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}